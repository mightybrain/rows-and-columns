{"version":3,"file":"index.js","mappings":"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","sources":["webpack://colored-tiles/./src/assets/styles/index.styl","webpack://colored-tiles/./node_modules/css-loader/dist/runtime/api.js","webpack://colored-tiles/./node_modules/css-loader/dist/runtime/getUrl.js","webpack://colored-tiles/./node_modules/css-loader/dist/runtime/sourceMaps.js","webpack://colored-tiles/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://colored-tiles/./node_modules/style-loader/dist/runtime/insertBySelector.js","webpack://colored-tiles/./node_modules/style-loader/dist/runtime/insertStyleElement.js","webpack://colored-tiles/./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js","webpack://colored-tiles/./node_modules/style-loader/dist/runtime/singletonStyleDomAPI.js","webpack://colored-tiles/webpack/bootstrap","webpack://colored-tiles/webpack/runtime/compat get default export","webpack://colored-tiles/webpack/runtime/define property getters","webpack://colored-tiles/webpack/runtime/global","webpack://colored-tiles/webpack/runtime/hasOwnProperty shorthand","webpack://colored-tiles/webpack/runtime/publicPath","webpack://colored-tiles/webpack/runtime/jsonp chunk loading","webpack://colored-tiles/webpack/runtime/nonce","webpack://colored-tiles/./src/assets/styles/index.styl?5fbf","webpack://colored-tiles/./src/modules/Assets.js","webpack://colored-tiles/./src/modules/State.js","webpack://colored-tiles/./src/modules/Draw.js","webpack://colored-tiles/./src/modules/Color.js","webpack://colored-tiles/./src/modules/Text.js","webpack://colored-tiles/./src/modules/Button.js","webpack://colored-tiles/./src/modules/OpenScene.js","webpack://colored-tiles/./src/modules/Tile.js","webpack://colored-tiles/./src/modules/LevelPreview.js","webpack://colored-tiles/./src/modules/LevelController.js","webpack://colored-tiles/./src/modules/Cell.js","webpack://colored-tiles/./src/modules/Random.js","webpack://colored-tiles/./src/modules/TileScaleAnimation.js","webpack://colored-tiles/./src/modules/YSDK.js","webpack://colored-tiles/./src/modules/Field.js","webpack://colored-tiles/./src/modules/CoreScene.js","webpack://colored-tiles/./src/modules/ResultScene.js","webpack://colored-tiles/./src/modules/SceneManager.js","webpack://colored-tiles/./src/modules/Renderer.js","webpack://colored-tiles/./src/modules/Game.js","webpack://colored-tiles/./src/index.js"],"sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_GET_URL_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/getUrl.js\";\nvar ___CSS_LOADER_URL_IMPORT_0___ = new URL(\"../fonts/Nunito-Black.woff2\", import.meta.url);\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\nvar ___CSS_LOADER_URL_REPLACEMENT_0___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"@font-face{font-family:'Nunito';src:url(\" + ___CSS_LOADER_URL_REPLACEMENT_0___ + \") format('woff2');font-weight:900;font-style:#000}body{position:fixed;top:0;left:0;display:flex;justify-content:center;width:100%;height:100%;margin:0;padding:0;overflow:hidden;background-color:#1d3753}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/assets/styles/index.styl\"],\"names\":[],\"mappings\":\"AAAA,WACE,oBAAY,CACZ,2DAAqC,CACrC,eAAY,CACZ,eAAW,CAEb,KACE,cAAS,CACT,KAAI,CACJ,MAAK,CACL,YAAQ,CACR,sBAAgB,CAChB,UAAM,CACN,WAAO,CACP,QAAO,CACP,SAAQ,CACR,eAAS,CACT,wBAAiB\",\"sourcesContent\":[\"@font-face\\r\\n  font-family 'Nunito'\\r\\n  src url('../fonts/Nunito-Black.woff2') format('woff2')\\r\\n  font-weight 900\\r\\n  font-style black\\r\\n\\r\\nbody\\r\\n  position fixed\\r\\n  top 0\\r\\n  left 0\\r\\n  display flex\\r\\n  justify-content center\\r\\n  width 100%\\r\\n  height 100%\\r\\n  margin 0\\r\\n  padding 0\\r\\n  overflow hidden\\r\\n  background-color #1D3753\\r\\n\\t\\t\\t\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = [];\n\n  // return the list of modules as css string\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n      content += cssWithMappingToString(item);\n      if (needLayer) {\n        content += \"}\";\n      }\n      if (item[2]) {\n        content += \"}\";\n      }\n      if (item[4]) {\n        content += \"}\";\n      }\n      return content;\n    }).join(\"\");\n  };\n\n  // import a list of modules into the list\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n    var alreadyImportedModules = {};\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n      list.push(item);\n    }\n  };\n  return list;\n};","\"use strict\";\n\nmodule.exports = function (url, options) {\n  if (!options) {\n    options = {};\n  }\n  if (!url) {\n    return url;\n  }\n  url = String(url.__esModule ? url.default : url);\n\n  // If url is already wrapped in quotes, remove them\n  if (/^['\"].*['\"]$/.test(url)) {\n    url = url.slice(1, -1);\n  }\n  if (options.hash) {\n    url += options.hash;\n  }\n\n  // Should url be wrapped?\n  // See https://drafts.csswg.org/css-values-3/#urls\n  if (/[\"'() \\t\\n]|(%20)/.test(url) || options.needQuotes) {\n    return \"\\\"\".concat(url.replace(/\"/g, '\\\\\"').replace(/\\n/g, \"\\\\n\"), \"\\\"\");\n  }\n  return url;\n};","\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n  if (!cssMapping) {\n    return content;\n  }\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    return [content].concat([sourceMapping]).join(\"\\n\");\n  }\n  return [content].join(\"\\n\");\n};","\"use strict\";\n\nvar stylesInDOM = [];\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n  for (var i = 0; i < stylesInDOM.length; i++) {\n    if (stylesInDOM[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n  return result;\n}\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var indexByIdentifier = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3],\n      supports: item[4],\n      layer: item[5]\n    };\n    if (indexByIdentifier !== -1) {\n      stylesInDOM[indexByIdentifier].references++;\n      stylesInDOM[indexByIdentifier].updater(obj);\n    } else {\n      var updater = addElementStyle(obj, options);\n      options.byIndex = i;\n      stylesInDOM.splice(i, 0, {\n        identifier: identifier,\n        updater: updater,\n        references: 1\n      });\n    }\n    identifiers.push(identifier);\n  }\n  return identifiers;\n}\nfunction addElementStyle(obj, options) {\n  var api = options.domAPI(options);\n  api.update(obj);\n  var updater = function updater(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {\n        return;\n      }\n      api.update(obj = newObj);\n    } else {\n      api.remove();\n    }\n  };\n  return updater;\n}\nmodule.exports = function (list, options) {\n  options = options || {};\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDOM[index].references--;\n    }\n    var newLastIdentifiers = modulesToDom(newList, options);\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n      var _index = getIndexByIdentifier(_identifier);\n      if (stylesInDOM[_index].references === 0) {\n        stylesInDOM[_index].updater();\n        stylesInDOM.splice(_index, 1);\n      }\n    }\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","\"use strict\";\n\nvar memo = {};\n\n/* istanbul ignore next  */\nfunction getTarget(target) {\n  if (typeof memo[target] === \"undefined\") {\n    var styleTarget = document.querySelector(target);\n\n    // Special case to return head of iframe instead of iframe itself\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n      try {\n        // This will throw an exception if access to iframe is blocked\n        // due to cross-origin restrictions\n        styleTarget = styleTarget.contentDocument.head;\n      } catch (e) {\n        // istanbul ignore next\n        styleTarget = null;\n      }\n    }\n    memo[target] = styleTarget;\n  }\n  return memo[target];\n}\n\n/* istanbul ignore next  */\nfunction insertBySelector(insert, style) {\n  var target = getTarget(insert);\n  if (!target) {\n    throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n  }\n  target.appendChild(style);\n}\nmodule.exports = insertBySelector;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction insertStyleElement(options) {\n  var element = document.createElement(\"style\");\n  options.setAttributes(element, options.attributes);\n  options.insert(element, options.options);\n  return element;\n}\nmodule.exports = insertStyleElement;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction setAttributesWithoutAttributes(styleElement) {\n  var nonce = typeof __webpack_nonce__ !== \"undefined\" ? __webpack_nonce__ : null;\n  if (nonce) {\n    styleElement.setAttribute(\"nonce\", nonce);\n  }\n}\nmodule.exports = setAttributesWithoutAttributes;","\"use strict\";\n\n/* istanbul ignore next  */\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join(\"\\n\");\n  };\n}();\n\n/* istanbul ignore next  */\nfunction apply(styleElement, index, remove, obj) {\n  var css;\n  if (remove) {\n    css = \"\";\n  } else {\n    css = \"\";\n    if (obj.supports) {\n      css += \"@supports (\".concat(obj.supports, \") {\");\n    }\n    if (obj.media) {\n      css += \"@media \".concat(obj.media, \" {\");\n    }\n    var needLayer = typeof obj.layer !== \"undefined\";\n    if (needLayer) {\n      css += \"@layer\".concat(obj.layer.length > 0 ? \" \".concat(obj.layer) : \"\", \" {\");\n    }\n    css += obj.css;\n    if (needLayer) {\n      css += \"}\";\n    }\n    if (obj.media) {\n      css += \"}\";\n    }\n    if (obj.supports) {\n      css += \"}\";\n    }\n  }\n\n  // For old IE\n  /* istanbul ignore if  */\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = styleElement.childNodes;\n    if (childNodes[index]) {\n      styleElement.removeChild(childNodes[index]);\n    }\n    if (childNodes.length) {\n      styleElement.insertBefore(cssNode, childNodes[index]);\n    } else {\n      styleElement.appendChild(cssNode);\n    }\n  }\n}\nvar singletonData = {\n  singleton: null,\n  singletonCounter: 0\n};\n\n/* istanbul ignore next  */\nfunction domAPI(options) {\n  if (typeof document === \"undefined\") return {\n    update: function update() {},\n    remove: function remove() {}\n  };\n\n  // eslint-disable-next-line no-undef,no-use-before-define\n  var styleIndex = singletonData.singletonCounter++;\n  var styleElement =\n  // eslint-disable-next-line no-undef,no-use-before-define\n  singletonData.singleton || (\n  // eslint-disable-next-line no-undef,no-use-before-define\n  singletonData.singleton = options.insertStyleElement(options));\n  return {\n    update: function update(obj) {\n      apply(styleElement, styleIndex, false, obj);\n    },\n    remove: function remove(obj) {\n      apply(styleElement, styleIndex, true, obj);\n    }\n  };\n}\nmodule.exports = domAPI;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) scriptUrl = scripts[scripts.length - 1].src\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","__webpack_require__.b = document.baseURI || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t179: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// no jsonp function","__webpack_require__.nc = undefined;","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/singletonStyleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      \n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/stylus-loader/dist/cjs.js!./index.styl\";\n      \n      \n\nvar options = {};\n\n;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/stylus-loader/dist/cjs.js!./index.styl\";\n       export default content && content.locals ? content.locals : undefined;\n","export default class Assets {\r\n\tconstructor() {\r\n\t\tthis._assets = {};\r\n\t\tthis._loaded = 0;\r\n\t}\r\n\r\n\tload() {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tif (!Assets.data.length) resolve();\r\n\t\t\t\r\n\t\t\tAssets.data.forEach(source => {\r\n\t\t\t\tconst type = source.fileName.split('.').pop();\r\n\t\t\t\tif (Assets.imagesTypes.includes(type)) this._loadImage(source, resolve);\r\n\t\t\t\tif (Assets.soundsTypes.includes(type)) this._loadSound(source, resolve);\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\r\n\t_increaseLoaded(resolve) {\r\n\t\tthis._loaded += 1;\r\n\t\tif (this._loaded === Assets.data.length) resolve();\r\n\t}\r\n\r\n\t_loadImage(source, resolve) {\r\n\t\tconst image = new Image();\r\n\r\n\t\timage.addEventListener('load', () => {\r\n\t\t\tthis._assets[source.fileName] = image;\r\n\t\t\tthis._increaseLoaded(resolve);\r\n\t\t})\r\n\r\n\t\timage.src = source.file;\r\n\t}\r\n\r\n\tget(fileName) {\r\n\t\treturn this._assets[fileName];\r\n\t}\r\n\r\n\tstatic imagesTypes = ['png'];\r\n\tstatic data = [];\r\n}","import levels from '../assets/json/levels.json';\r\n\r\nexport default class State {\r\n\tconstructor({ assets }) {\r\n\t\tthis._assets = assets;\r\n\r\n\t\tthis._level = 15;\r\n\t\tthis._gold = 0;\r\n\t}\r\n\r\n\tincreaseLevel() {\r\n\t\tconst nextLevel = this._level + 1;\r\n\t\tif (levels.maps[nextLevel]) this._level = nextLevel;\r\n\t\telse this._level = 0;\r\n\t}\r\n\r\n\tresetLevel() {\r\n\t\tthis._level = 0;\r\n\t}\r\n\r\n\tsetLevel(level) {\r\n\t\tthis._level = level;\r\n\t}\r\n\r\n\tgetLevel() {\r\n\t\treturn this._level;\r\n\t}\r\n}","export default class Draw {\r\n  static rect(ctx, x, y, width, height, color, opacity = 1) {\r\n    ctx.globalAlpha = opacity;\r\n\t\tctx.fillStyle = color;\r\n\t\tctx.fillRect(x, y, width, height);\r\n    ctx.globalAlpha = 1;\r\n  }\r\n\r\n  static roundedRect(ctx, x, y, width, height, radius, color, opacity = 1) {\r\n    ctx.globalAlpha = opacity;\r\n    ctx.fillStyle = color;\r\n    ctx.beginPath();\r\n    ctx.moveTo(x, y + radius);\r\n    ctx.arcTo(x, y + height, x + radius, y + height, radius);\r\n    ctx.arcTo(x + width, y + height, x + width, y + height - radius, radius);\r\n    ctx.arcTo(x + width, y, x + width - radius, y, radius);\r\n    ctx.arcTo(x, y, x, y + radius, radius);\r\n    ctx.fill();\r\n    ctx.globalAlpha = 1;\r\n  }\r\n  \r\n  static stroke(ctx, thickness, color) {\r\n    ctx.strokeStyle = color;\r\n    ctx.lineWidth = thickness;\r\n    ctx.stroke();\r\n  }\r\n  \r\n  static text(ctx, x, y, text, size, color) {\r\n    ctx.fillStyle = color;\r\n    ctx.font = `${size}px Nunito`;\r\n    ctx.fillText(text, x, y);\r\n  }\r\n}","export default class Color {\r\n  static grass = {\r\n    id: 1,\r\n    key: '#4DAF34',\r\n  };\r\n  static blueDeep = {\r\n    id: 2,\r\n    key: '#1D3753',\r\n  };\r\n  static blueNight = {\r\n    id: 3,\r\n    key: '#234368',\r\n  };\r\n  static blue = {\r\n    id: 4,\r\n    key: '#4A5AEC',\r\n  };\r\n  static green = {\r\n    id: 5,\r\n    key: '#73AE37',\r\n  };\r\n  static sea = {\r\n    id: 6,\r\n    key: '#4BD5F5',\r\n  };\r\n  static red = {\r\n    id: 7,\r\n    key: '#D74E23',\r\n  };\r\n  static purple = {\r\n    id: 8,\r\n    key: '#E436EE',\r\n  };\r\n  static orange = {\r\n    id: 9,\r\n    key: '#FF891C',\r\n  };\r\n  static yellow = {\r\n    id: 10,\r\n    key: '#FFC530',\r\n  };\r\n  static white = {\r\n    id: 11,\r\n    key: '#FFFFFF',\r\n  };\r\n  static softGrass = {\r\n    id: 12,\r\n    key: '#5DBB46',\r\n  }\r\n}","export default class Text {\r\n  static calcTextMetrics(ctx, text, fontSize) {\r\n    ctx.font = `${fontSize}px Nunito`;\r\n    const { width, actualBoundingBoxAscent, actualBoundingBoxDescent } = ctx.measureText(text);\r\n    return { textWidth: width, textHeight: actualBoundingBoxAscent + actualBoundingBoxDescent }\r\n  }\r\n}","import Text from './Text';\r\nimport Draw from './Draw';\r\nimport Color from './Color';\r\n\r\nexport default class Button {\r\n  constructor({ position, size, label }) {\r\n    this._position = position;\r\n    this._size = size;\r\n    this._label = label;\r\n  }\r\n\r\n  render(ctx) {\r\n    Draw.roundedRect(ctx, this._position.x, this._position.y, this._size.width, this._size.height, Button.radius, Color.blueNight.key);\r\n\r\n    const { textWidth } = Text.calcTextMetrics(ctx, this._label, Button.fontSize);\r\n\r\n    const labelPositionX = this._position.x + this._size.width / 2 - textWidth / 2;\r\n    const labelPositionY = this._position.y + this._size.height / 2 + Button.fontSize / 3;\r\n\r\n    Draw.text(ctx, labelPositionX, labelPositionY, this._label, Button.fontSize, Color.white.key);\r\n  }\r\n\r\n  isPressed(clickPosition) {\r\n    return (\r\n      clickPosition.x > this._position.x && clickPosition.x < this._position.x + this._size.width &&\r\n      clickPosition.y > this._position.y && clickPosition.y < this._position.y + this._size.height\r\n    );\r\n  }\r\n\r\n  static fontSize = 32;\r\n  static radius = 37;\r\n  static horizontalPadding = 40;\r\n}","import Draw from './Draw';\r\nimport Text from './Text';\r\nimport Button from './Button';\r\nimport Color from './Color';\r\n\r\nexport default class OpenScene {\r\n  constructor({ canvas, assets, state, sceneManager }) {\r\n    this._canvas = canvas;\r\n\t\tthis._assets = assets;\r\n\t\tthis._state = state;\r\n    this._sceneManager = sceneManager;\r\n    this._levelCounter = this._state.getLevel();\r\n\r\n    this._startButton = null;\r\n    this._initButton();\r\n  }\r\n\r\n  update(time) {\r\n    \r\n  }\r\n\r\n  render(ctx) {\r\n    Draw.rect(ctx, 0, 0, this._canvas.width, this._canvas.height, Color.blueDeep.key);\r\n\r\n    this._renderTitle(ctx);\r\n    this._renderLevelCounter(ctx);\r\n    this._startButton.render(ctx);\r\n  }\r\n\r\n  _renderTitle(ctx) {\r\n    OpenScene.title.split(' ').forEach((string, index) => {\r\n      const { textWidth } = Text.calcTextMetrics(ctx, string, OpenScene.titleFontSize);\r\n\r\n      const stringPositionX = this._canvas.width / 2 - textWidth / 2;\r\n      const stringPositionY = OpenScene.titlePositionY + (index * OpenScene.titleLineHeight) + OpenScene.titleFontSize;\r\n\r\n      Draw.text(ctx, stringPositionX, stringPositionY, string, OpenScene.titleFontSize, Color.white.key);\r\n    })\r\n  }\r\n\r\n  _renderLevelCounter(ctx) {\r\n    const { textWidth: levelCounterHintWidth } = Text.calcTextMetrics(ctx, OpenScene.levelCounterHint, OpenScene.levelCounterHintFontSize);\r\n    const levelCounterHintPositionX = this._canvas.width / 2 - levelCounterHintWidth / 2;\r\n    const levelCounterHintPositionY = OpenScene.levelCounterHintPositionY + OpenScene.levelCounterHintFontSize;\r\n    Draw.text(ctx, levelCounterHintPositionX, levelCounterHintPositionY, OpenScene.levelCounterHint, OpenScene.levelCounterHintFontSize, Color.yellow.key);\r\n\r\n    const levelCounter = this._levelCounter + 1;\r\n    const { textWidth: levelCounterWidth } = Text.calcTextMetrics(ctx, levelCounter, OpenScene.levelCounterFontSize);\r\n    const levelCounterPositionX = this._canvas.width / 2 - levelCounterWidth / 2;\r\n    const levelCounterPositionY = OpenScene.levelCounterPositionY + OpenScene.levelCounterFontSize;\r\n    Draw.text(ctx, levelCounterPositionX, levelCounterPositionY, levelCounter, OpenScene.levelCounterFontSize, Color.yellow.key);\r\n  }\r\n\r\n  handleClick({ position }) {\r\n    if (this._startButton.isPressed(position)) this._sceneManager.showCoreScene();\r\n  }\r\n\r\n  handleStartDragging() {\r\n\r\n  }\r\n\r\n  handleDragging() {\r\n\r\n  }\r\n\r\n  handleEndDragging() {\r\n\r\n  }\r\n\r\n  _initButton() {\r\n    this._startButton = new Button({\r\n      position: {\r\n        x: this._canvas.width / 2 - OpenScene.startButtonWidth / 2,\r\n        y: OpenScene.startButtonPositionY,\r\n      },\r\n      size: {\r\n        width: OpenScene.startButtonWidth,\r\n        height: OpenScene.buttonsHeight,\r\n      },\r\n      label: 'Играть',\r\n    })\r\n  }\r\n\r\n  static title = 'Colored Tiles';\r\n  static titleFontSize = 96;\r\n  static titleLineHeight = 100;\r\n  static titlePositionY = 329;\r\n\r\n  static levelCounterHint = 'Уровень:';\r\n  static levelCounterHintFontSize = 48;\r\n  static levelCounterHintPositionY = 609;\r\n  static levelCounterFontSize = 96;\r\n  static levelCounterPositionY = 667;\r\n\r\n  static startButtonPositionY = 843;\r\n  static startButtonWidth = 194;\r\n  static buttonsHeight = 74;\r\n}","import Draw from './Draw';\r\nimport Color from './Color';\r\n\r\nexport default class Tile {\r\n  constructor({ color, size, position }) {\r\n    this._color = color;\r\n    this._size = size;\r\n    this._position = position;\r\n    this._opacity = 1;\r\n    this._scaleFactor = 1;\r\n  }\r\n\r\n  render(ctx) {\r\n    const width = this._size.width * this._scaleFactor;\r\n    const height = this._size.height * this._scaleFactor;\r\n    const positionX = this._position.x - (width - this._size.width) / 2;\r\n    const positionY = this._position.y - (height - this._size.height) / 2;\r\n    const radius = Tile.radius * this._scaleFactor;\r\n    \r\n    Draw.roundedRect(ctx, positionX, positionY, width, height, radius, this._color.key, this._opacity);\r\n    //Draw.roundedRect(ctx, this._position.x, this._position.y, this._size.width, this._size.height, Tile.radius, this._color.key, this._opacity);\r\n  }\r\n\r\n  getScaleFactor() {\r\n    return this._scaleFactor;\r\n  }\r\n\r\n  setScaleFactor(scaleFactor) {\r\n    this._scaleFactor = scaleFactor;\r\n  }\r\n\r\n  getPosition() {\r\n    return this._position;\r\n  }\r\n\r\n  setPosition(position) {\r\n    this._position = position;\r\n  }\r\n\r\n  getColor() {\r\n    return this._color;\r\n  }\r\n\r\n  getOpacity() {\r\n    return this._opacity;\r\n  }\r\n\r\n  setOpacity(opacity) {\r\n    this._opacity = opacity;\r\n  }\r\n\r\n  static radius = 30;\r\n  static colors = [\r\n    Color.blueNight,\r\n    Color.blue,\r\n    Color.green,\r\n    Color.sea,\r\n    Color.red,\r\n    Color.purple,\r\n    Color.orange,\r\n    Color.yellow,\r\n  ];\r\n}","import Draw from './Draw';\r\nimport Tile from './Tile';\r\n\r\nexport default class LevelPreview {\r\n  constructor({ map }) {\r\n    this._map = map;\r\n\r\n    this._columnWidth = 0;\r\n    this._rowHeight = 0;\r\n    this._setMetrics();\r\n  }\r\n\r\n  render(ctx) {\r\n    this._map.forEach((row, y) => {\r\n      row.forEach((colorId, x) => {\r\n        const tilePositionX = LevelPreview.positionX + (this._columnWidth + LevelPreview.gap) * x;\r\n        const tilePositionY = LevelPreview.positionY + (this._rowHeight + LevelPreview.gap) * y;\r\n\r\n        const tileColor = Tile.colors.find(color => color.id === colorId);\r\n\r\n        Draw.roundedRect(ctx, tilePositionX, tilePositionY, this._columnWidth, this._rowHeight, LevelPreview.tileRadius, tileColor.key);\r\n      });\r\n    });\r\n  }\r\n\r\n  _setMetrics() {\r\n    const xLength = this._map[0].length;\r\n    const yLength = this._map.length;\r\n\r\n    this._columnWidth = (LevelPreview.width - LevelPreview.gap * (xLength - 1)) / xLength;\r\n    this._rowHeight = (LevelPreview.height - LevelPreview.gap * (yLength - 1)) / yLength;\r\n  }\r\n\r\n  static width = 194;\r\n  static height = 194;\r\n  static positionX = 253;\r\n  static positionY = 40;\r\n  static gap = 2;\r\n  static tileRadius = 10;\r\n}","import Tile from './Tile';\r\n\r\nexport default class LevelController {\r\n  constructor({ map }) {\r\n    this._map = map;\r\n  }\r\n\r\n  isMatch(currentFieldMap) {\r\n    return currentFieldMap.every((row, y) => {\r\n      return row.every((cell, x) => cell.getTile().getColor().id === this._map[y][x]);\r\n    })\r\n  }\r\n\r\n  getMapLengths() {\r\n    return {\r\n      x: this._map[0].length,\r\n      y: this._map.length,\r\n    }\r\n  }\r\n\r\n  getColorsCounters() {\r\n    const colorsId = this._map.flat();\r\n    const uniqueColorsId = Array.from(new Set(colorsId));\r\n    return uniqueColorsId.map(id => {\r\n      return {\r\n        color: Tile.colors.find(color => color.id === id),\r\n        counter: colorsId.filter(colorId => colorId === id).length,\r\n      }\r\n    })\r\n  }\r\n}","export default class Cell {\r\n  constructor({ coords }) {\r\n    this._coords = coords;\r\n    this._tile = null;\r\n    this._detachedTile = null;\r\n  }\r\n\r\n  render(ctx) {\r\n    if (this._tile) this._tile.render(ctx);\r\n  }\r\n\r\n  setTile(tile) {\r\n    this._tile = tile;\r\n    const detachedTile = this._detachedTile;\r\n    this._detachedTile = null;\r\n    return this._tile !== detachedTile;\r\n  }\r\n\r\n  getTile() {\r\n    return this._tile;\r\n  }\r\n\r\n  detachTile() {\r\n    const tile = this._tile;\r\n    this._detachedTile = tile;\r\n    this._tile = null;\r\n    return tile;\r\n  }\r\n\r\n  getCoords() {\r\n    return this._coords;\r\n  }\r\n}","export default class Random {\r\n  static getRandomFromRange(from, to) {\r\n    return from === to ? from : from + Math.round(Math.random() * (to - from));\r\n  }\r\n}","export default class TileScaleAnimation {\r\n  constructor({ tile, delay = 0 }) {\r\n    this._tile = tile;\r\n    this._delay = delay;\r\n    this._startTime = null;\r\n    this._finished = false;\r\n  }\r\n\r\n  update({ timestamp }) {\r\n    if (this._finished) return;\r\n    else if (this._startTime === null) this._startTime = timestamp + this._delay;\r\n    \r\n    const progressTime = timestamp - this._startTime;\r\n    if (progressTime < 0) return;\r\n\r\n    let scaleFactor = 1;\r\n\r\n    if (progressTime < TileScaleAnimation.duration) {\r\n      const progressDelta = progressTime / TileScaleAnimation.duration;\r\n      scaleFactor = Math.pow(1 - progressDelta, 2) * TileScaleAnimation.path[0] + 2 * (1 - progressDelta) * progressDelta * TileScaleAnimation.path[1] + Math.pow(progressDelta, 2) * TileScaleAnimation.path[2];\r\n    } else {\r\n      this._finished = true;\r\n    }\r\n\r\n    this._tile.setScaleFactor(scaleFactor);\r\n  }\r\n\r\n  isFinished() {\r\n    return this._finished;\r\n  }\r\n\r\n  static duration = 1000; \r\n  static path = [1, 0.6, 1];\r\n}","export default class YSDK {\r\n  static ysdk = null;\r\n  static player = null;\r\n  \r\n  static async initYSDK() {\r\n    return YaGames\r\n      .init()\r\n      .then(ysdk => {\r\n        YSDK.ysdk = ysdk;\r\n        ysdk.features.LoadingAPI?.ready();\r\n        console.log('Yandex SDK initialized');\r\n      })\r\n      .catch(err => {\r\n        console.log('Ошибка при инициализации YSDK');\r\n      });\r\n  }\r\n  \r\n  static async initPlayer() {\r\n    return YSDK.ysdk\r\n      .getPlayer({ scopes: false })\r\n      .then(player => {\r\n        YSDK.player = player;\r\n        console.log('Player initialized');\r\n        console.log(YSDK.player);\r\n      })\r\n      .catch(err => {\r\n        console.log('Ошибка при инициализации объекта Player');\r\n      });\r\n  }\r\n  \r\n  static async savePlayerStats(data) {\r\n    return YSDK.player\r\n      .setStats(data)\r\n      .then(() => {\r\n        console.log('Player data is saved');\r\n      })\r\n      .catch(err => {\r\n        console.log('Ошибка при сохранении данных игрока');\r\n      });\r\n  }\r\n  \r\n  static async getPlayerStats() {\r\n    return YSDK.player\r\n      .getStats()\r\n      .then(data => {\r\n        console.log('Получены сохраненные данные игрока');\r\n        console.log(data);\r\n        return data;\r\n      })\r\n      .catch(err => {\r\n        console.log('Ошибка при получении данных игрока');\r\n      });\r\n  }\r\n}","import Tile from './Tile';\r\nimport Cell from './Cell';\r\nimport Random from './Random';\r\nimport TileScaleAnimation from './TileScaleAnimation';\r\nimport YSDK from './YSDK';\r\n\r\nexport default class Field {\r\n  constructor({ canvas, assets, state, sceneManager, levelController }) {\r\n    this._canvas = canvas;\r\n    this._assets = assets;\r\n    this._state = state;\r\n    this._sceneManager = sceneManager;\r\n    this._levelController = levelController;\r\n\r\n    this._columnWidth = 0;\r\n    this._rowHeight = 0;\r\n    this._maxOutOfBoundsX = 0;\r\n    this._maxOutOfBoundsY = 0;\r\n    this._setMetrics();\r\n\r\n    this._map = [];\r\n    this._setMap();\r\n    this._setTiles();\r\n\r\n    this._animations = [];\r\n\r\n    this._startDraggingPosition = null;\r\n    this._startDraggingCoords = null;\r\n    this._prevDraggingPosition = null;\r\n    this._draggingAxis = null;\r\n    this._detachedTiles = [];\r\n    this._levelComplete = false;\r\n\r\n    this._movesCounter = 0;\r\n  }\r\n\r\n  update(time) {\r\n    this._animations.forEach(animation => animation.update(time));\r\n\r\n    this._animations = this._animations.filter(animation => !animation.isFinished());\r\n  }\r\n\r\n  render(ctx) {\r\n    this._map.forEach(row => {\r\n      row.forEach(cell => cell.render(ctx));\r\n    });\r\n\r\n    this._detachedTiles.forEach(tile => tile.render(ctx));\r\n  }\r\n\r\n  handleStartDragging({ position }) {\r\n    if (this._levelComplete || !this._isFieldIncludesPosition(position)) return;\r\n\r\n    this._startDraggingPosition = position;\r\n    this._startDraggingCoords = this.getCoordsByPosition(position);\r\n\r\n    this._prevDraggingPosition = position;\r\n  }\r\n\r\n  handleDragging({ position }) {\r\n    if (!this._startDraggingPosition || !this._startDraggingCoords) return;\r\n\r\n    if (!this._draggingAxis) this._setDraggingAxis(position);\r\n\r\n    if (!this._detachedTiles.length) this._detachTiles();\r\n\r\n    if (this._draggingAxis === 'x') this._moveRow(position);\r\n    else this._moveColumn(position);\r\n\r\n    this._prevDraggingPosition = position;\r\n  }\r\n\r\n  _setDraggingAxis(draggingPosition) {\r\n    const xOffset = this._startDraggingPosition.x - draggingPosition.x;\r\n    const yOffset = this._startDraggingPosition.y - draggingPosition.y;\r\n\r\n    this._draggingAxis = Math.abs(xOffset) > Math.abs(yOffset) ? 'x' : 'y';\r\n  }\r\n\r\n  handleEndDragging(event) {\r\n    if (!this._detachedTiles.length) return;\r\n\r\n    const axis = this._draggingAxis;\r\n    this._detachedTiles.sort((a, b) => a.getPosition()[axis] - b.getPosition()[axis]);\r\n\r\n    let tilesWasUpdated = false;\r\n\r\n    if (axis === 'x') {\r\n      this._map[this._startDraggingCoords.y].forEach(cell => {\r\n        const tileWasUpdated = this._attachFirstDetachedTileToCell(cell);\r\n        tilesWasUpdated = tilesWasUpdated || tileWasUpdated;\r\n      });\r\n    } else {\r\n      this._map.forEach(row => {\r\n        const cell = row[this._startDraggingCoords.x];\r\n        const tileWasUpdated = this._attachFirstDetachedTileToCell(cell);\r\n        tilesWasUpdated = tilesWasUpdated || tileWasUpdated;\r\n      });\r\n    }\r\n\r\n    if (tilesWasUpdated) this._movesCounter += 1;\r\n\r\n    this._startDraggingPosition = null;\r\n    this._startDraggingCoords = null;\r\n    this._prevDraggingPosition = null;\r\n    this._draggingAxis = null;\r\n\r\n    this._handleDraggingResult();\r\n  }\r\n\r\n  _attachFirstDetachedTileToCell(cell) {\r\n    const coords = cell.getCoords();\r\n    const tile = this._detachedTiles.shift();\r\n\r\n    const position = this.getPositionByCoords(coords);\r\n    tile.setPosition(position);\r\n    tile.setOpacity(1);\r\n\r\n    return cell.setTile(tile);\r\n  }\r\n\r\n  async _handleDraggingResult() {\r\n    this._levelComplete = this._levelController.isMatch(this._map);\r\n    if (this._levelComplete) {\r\n      await this._savePlayerStats();\r\n      this._startLevelCompliteAnimation();\r\n      setTimeout(() => {\r\n        this._sceneManager.showResultScene(this._movesCounter);\r\n      }, 1500)\r\n    }\r\n  }\r\n\r\n  async _savePlayerStats() {\r\n    const level = this._state.getLevel() + 1;\r\n    await YSDK.savePlayerStats({ level });\r\n  }\r\n\r\n  _startLevelCompliteAnimation() {\r\n    this._map.forEach((row, y) => {\r\n      row.forEach((cell, x) => {\r\n        const tile = cell.getTile();\r\n        const delay = 0; //100 * y;\r\n        const animation = new TileScaleAnimation({ tile, delay });\r\n        this._animations.push(animation);\r\n      })\r\n    })\r\n  }\r\n\r\n  _detachTiles() {\r\n    this._detachedTiles = this._draggingAxis === 'x' ?\r\n      this._map[this._startDraggingCoords.y].map(cell => cell.detachTile()) :\r\n      this._map.map(row => row[this._startDraggingCoords.x].detachTile());\r\n  }\r\n\r\n  _moveRow(position) {\r\n    const offset = position.x - this._prevDraggingPosition.x;\r\n\r\n    this._detachedTiles.forEach(tile => {\r\n      const currentPosition = tile.getPosition();\r\n\r\n      const newPosition = {\r\n        x: currentPosition.x + offset,\r\n        y: currentPosition.y,\r\n      }\r\n\r\n      if (offset < 0 && newPosition.x < Field.positionX - this._maxOutOfBoundsX) {\r\n        newPosition.x += this._detachedTiles.length * (this._columnWidth + Field.gap);\r\n      } else if (offset > 0 && newPosition.x + this._columnWidth > Field.positionX + Field.width + this._maxOutOfBoundsX) {\r\n        newPosition.x -= this._detachedTiles.length * (this._columnWidth + Field.gap);\r\n      }\r\n\r\n      let opacity = 1;\r\n\r\n      if (newPosition.x < Field.positionX) {\r\n        opacity = 1 - (Field.positionX - newPosition.x) / this._maxOutOfBoundsX;\r\n      } else if (newPosition.x + this._columnWidth > Field.positionX + Field.width) {\r\n        opacity = 1 - (newPosition.x + this._columnWidth - (Field.positionX + Field.width)) / this._maxOutOfBoundsX;\r\n      }\r\n\r\n      tile.setOpacity(opacity);\r\n      tile.setPosition(newPosition);\r\n    })\r\n  }\r\n\r\n  _moveColumn(position) {\r\n    const offset = position.y - this._prevDraggingPosition.y;\r\n\r\n    this._detachedTiles.forEach(tile => {\r\n      const currentPosition = tile.getPosition();\r\n\r\n      const newPosition = {\r\n        x: currentPosition.x,\r\n        y: currentPosition.y + offset,\r\n      }\r\n\r\n      if (offset < 0 && newPosition.y < Field.positionY - this._maxOutOfBoundsY) {\r\n        newPosition.y += this._detachedTiles.length * (this._rowHeight + Field.gap);\r\n      } else if (offset > 0 && newPosition.y + this._rowHeight > Field.positionY + Field.height + this._maxOutOfBoundsY) {\r\n        newPosition.y -= this._detachedTiles.length * (this._rowHeight + Field.gap);\r\n      }\r\n\r\n      let opacity = 1;\r\n\r\n      if (newPosition.y < Field.positionY) {\r\n        opacity = 1 - (Field.positionY - newPosition.y) / this._maxOutOfBoundsY;\r\n      } else if (newPosition.y + this._rowHeight > Field.positionY + Field.height) {\r\n        opacity = 1 - (newPosition.y + this._rowHeight - (Field.positionY + Field.height)) / this._maxOutOfBoundsY;\r\n      }\r\n\r\n      tile.setOpacity(opacity);\r\n      tile.setPosition(newPosition);\r\n    })\r\n  }\r\n\r\n  getCoordsByPosition(position) {\r\n    return {\r\n      x: Math.floor((position.x - Field.positionX) / (Field.gap + this._columnWidth)),\r\n      y: Math.floor((position.y - Field.positionY) / (Field.gap + this._rowHeight)),\r\n    }\r\n  }\r\n\r\n  getPositionByCoords(coords) {\r\n    return {\r\n      x: Field.positionX + coords.x * (Field.gap + this._columnWidth),\r\n      y: Field.positionY + coords.y * (Field.gap + this._rowHeight),\r\n    }\r\n  }\r\n\r\n  _getCellByCoords(coords) {\r\n    return this._map[coords.y][coords.x]\r\n  }\r\n\r\n  _isFieldIncludesPosition(position) {\r\n    return (\r\n      position.x > Field.positionX && position.x < Field.positionX + Field.width &&\r\n      position.y > Field.positionY && position.y < Field.positionY + Field.height\r\n    );\r\n  }\r\n\r\n  _setMetrics() {\r\n    const { x: xLength, y: yLength } = this._levelController.getMapLengths();\r\n\r\n    this._columnWidth = (Field.width - Field.gap * (xLength - 1)) / xLength;\r\n    this._rowHeight = (Field.height - Field.gap * (yLength - 1)) / yLength;\r\n\r\n    this._maxOutOfBoundsX = (Field.gap + this._columnWidth) / 2;\r\n    this._maxOutOfBoundsY = (Field.gap + this._rowHeight) / 2;\r\n  }\r\n\r\n  _setMap() {\r\n    const { x: xLength, y: yLength } = this._levelController.getMapLengths();\r\n\r\n    for (let y = 0; y < yLength; y++) {\r\n\r\n      const row = [];\r\n      for (let x = 0; x < xLength; x++) {\r\n        const cell = new Cell({ coords: { x, y }});\r\n        row.push(cell);\r\n      }\r\n\r\n      this._map.push(row);\r\n    }\r\n  }\r\n\r\n  _setTiles() {\r\n    let colorsCounters = this._levelController.getColorsCounters();\r\n\r\n    this._map.forEach(row => {\r\n      row.forEach(cell => {\r\n        const coords = cell.getCoords();\r\n\r\n        colorsCounters = colorsCounters.filter(colorCounter => colorCounter.counter);\r\n        const randomIndex = Random.getRandomFromRange(0, colorsCounters.length - 1);\r\n        const colorCounter = colorsCounters[randomIndex];\r\n        colorCounter.counter -= 1;\r\n\r\n        const tile = this._createTile(coords, colorCounter.color);\r\n        cell.setTile(tile);\r\n      })\r\n    })\r\n\r\n    if (this._levelController.isMatch(this._map)) this._setTiles();\r\n  }\r\n\r\n  _createTile(coords, color) {\r\n    const position = this.getPositionByCoords(coords);\r\n    const size = {\r\n      width: this._columnWidth,\r\n      height: this._rowHeight,\r\n    }\r\n    return new Tile({ color, size, position });\r\n  }\r\n  \r\n  static width = 662;\r\n  static height = 662;\r\n  static positionX = 19;\r\n  static positionY = 294;\r\n  static gap = 10;\r\n}","import LevelPreview from './LevelPreview';\r\nimport LevelController from './LevelController';\r\nimport Field from './Field';\r\nimport Draw from './Draw';\r\nimport Color from './Color';\r\n\r\nimport levels from '../assets/json/levels.json';\r\n\r\nexport default class CoreScene {\r\n\tconstructor({ canvas, assets, state, sceneManager }) {\r\n\t\tthis._canvas = canvas;\r\n\t\tthis._assets = assets;\r\n\t\tthis._state = state;\r\n\t\tthis._sceneManager = sceneManager;\r\n\r\n    this._level = levels.maps[state.getLevel()];\r\n\r\n    this._levelPreview = new LevelPreview({\r\n      map: this._level.map,\r\n    });\r\n\r\n    this._levelController = new LevelController({\r\n      map: this._level.map,\r\n    })\r\n\r\n\t\tthis._field = new Field({\r\n\t\t\tcanvas: this._canvas,\r\n\t\t\tassets: this._assets,\r\n\t\t\tstate: this._state,\r\n\t\t\tsceneManager: this._sceneManager,\r\n      levelController: this._levelController,\r\n\t\t});\r\n\t}\r\n\r\n\tupdate(time) {\r\n\t\tthis._field.update(time);\r\n\t}\r\n\r\n\trender(ctx) {\r\n    Draw.rect(ctx, 0, 0, this._canvas.width, this._canvas.height, Color.blueDeep.key);\r\n\r\n    this._levelPreview.render(ctx);\r\n\t\tthis._field.render(ctx);\r\n\t}\r\n\r\n\thandleClick({ position }) {\r\n\r\n\t}\r\n\r\n\thandleStartDragging(event) {\r\n\t\tthis._field.handleStartDragging(event);\r\n\t}\r\n\r\n\thandleDragging(event) {\r\n\t\tthis._field.handleDragging(event);\r\n\t}\r\n\r\n\thandleEndDragging(event) {\r\n\t\tthis._field.handleEndDragging(event);\r\n\t}\r\n}","import Draw from './Draw';\r\nimport Text from './Text';\r\nimport Button from './Button';\r\nimport Color from './Color';\r\n\r\nexport default class ResultScene {\r\n  constructor({ canvas, assets, state, sceneManager, movesCounter }) {\r\n    this._canvas = canvas;\r\n\t\tthis._assets = assets;\r\n\t\tthis._state = state;\r\n    this._sceneManager = sceneManager;\r\n    this._movesCounter = movesCounter;\r\n\r\n    this._continueButton = null;\r\n    this._initButton();\r\n  }\r\n\r\n  update(time) {\r\n    \r\n  }\r\n\r\n  render(ctx) {\r\n    Draw.rect(ctx, 0, 0, this._canvas.width, this._canvas.height, Color.blueDeep.key);\r\n\r\n    this._renderTitle(ctx);\r\n    this._renderMovesCounter(ctx);\r\n    this._continueButton.render(ctx);\r\n  }\r\n\r\n  _renderTitle(ctx) {\r\n    ResultScene.title.split(' ').forEach((string, index) => {\r\n      const { textWidth } = Text.calcTextMetrics(ctx, string, ResultScene.titleFontSize);\r\n\r\n      const stringPositionX = this._canvas.width / 2 - textWidth / 2;\r\n      const stringPositionY = ResultScene.titlePositionY + (index * ResultScene.titleLineHeight) + ResultScene.titleFontSize;\r\n\r\n      Draw.text(ctx, stringPositionX, stringPositionY, string, ResultScene.titleFontSize, Color.white.key);\r\n    })\r\n  }\r\n\r\n  _renderMovesCounter(ctx) {\r\n    const { textWidth: movesCounterHintWidth } = Text.calcTextMetrics(ctx, ResultScene.movesCounterHint, ResultScene.movesCounterHintFontSize);\r\n    const movesCounterHintPositionX = this._canvas.width / 2 - movesCounterHintWidth / 2;\r\n    const movesCounterHintPositionY = ResultScene.movesCounterHintPositionY + ResultScene.movesCounterHintFontSize;\r\n    Draw.text(ctx, movesCounterHintPositionX, movesCounterHintPositionY, ResultScene.movesCounterHint, ResultScene.movesCounterHintFontSize, Color.yellow.key);\r\n\r\n    const { textWidth: movesCounterWidth } = Text.calcTextMetrics(ctx, this._movesCounter, ResultScene.movesCounterFontSize);\r\n    const movesCounterPositionX = this._canvas.width / 2 - movesCounterWidth / 2;\r\n    const movesCounterPositionY = ResultScene.movesCounterPositionY + ResultScene.movesCounterFontSize;\r\n    Draw.text(ctx, movesCounterPositionX, movesCounterPositionY, this._movesCounter, ResultScene.movesCounterFontSize, Color.yellow.key);\r\n  }\r\n\r\n  handleClick({ position }) {\r\n    if (this._continueButton.isPressed(position)) {\r\n      this._state.increaseLevel();\r\n      this._sceneManager.showCoreScene();\r\n    }\r\n  }\r\n\r\n  handleStartDragging() {\r\n\r\n  }\r\n\r\n  handleDragging() {\r\n\r\n  }\r\n\r\n  handleEndDragging() {\r\n\r\n  }\r\n\r\n  _initButton() {\r\n    this._continueButton = new Button({\r\n      position: {\r\n        x: this._canvas.width / 2 - ResultScene.continueButtonWidth / 2,\r\n        y: ResultScene.continueButtonPositionY,\r\n      },\r\n      size: {\r\n        width: ResultScene.continueButtonWidth,\r\n        height: ResultScene.buttonsHeight,\r\n      },\r\n      label: 'Следующий уровень',\r\n    })\r\n  }\r\n\r\n  static title = 'Уровень пройден!';\r\n  static titleFontSize = 72;\r\n  static titleLineHeight = 76;\r\n  static titlePositionY = 318;\r\n\r\n  static movesCounterHint = 'Ходов:';\r\n  static movesCounterHintFontSize = 48;\r\n  static movesCounterHintPositionY = 530;\r\n  static movesCounterFontSize = 96;\r\n  static movesCounterPositionY = 584;\r\n\r\n  static continueButtonPositionY = 765;\r\n  static continueButtonWidth = 420;\r\n  static buttonsHeight = 74;\r\n}","import Draw from './Draw';\r\nimport Color from './Color';\r\nimport OpenScene from './OpenScene';\r\nimport CoreScene from './CoreScene';\r\nimport ResultScene from './ResultScene';\r\n\r\nexport default class SceneManager {\r\n\tconstructor({ canvas, assets, state }) {\r\n\t\tthis._canvas = canvas;\r\n\t\tthis._assets = assets;\r\n\t\tthis._state = state;\r\n\r\n\t\tthis._currentScene = null;\r\n\t\tthis._futureScene = null;\r\n\r\n\t\tthis._transitionOverlayOffsetX = 1;\r\n\t}\r\n\r\n\tupdate(time) {\r\n\t\tif (this._currentScene) this._currentScene.update(time);\r\n\r\n\t\tif (this._futureScene) this._updateSceneOut(time);\r\n\t\telse if (this._transitionOverlayOffsetX <= 0) this._updateSceneIn(time);\r\n\t}\r\n\r\n\t_updateSceneOut({ prevFrameDuration }) {\r\n\t\tif (!this._currentScene || this._transitionOverlayOffsetX === 0) {\r\n\t\t\tthis._currentScene = this._futureScene;\r\n\t\t\tthis._futureScene = null;\r\n\t\t} else  {\r\n\t\t\tthis._transitionOverlayOffsetX = Math.max(this._transitionOverlayOffsetX - prevFrameDuration / SceneManager.transitionDuration, 0);\r\n\t\t}\r\n\t}\r\n\r\n\t_updateSceneIn({ prevFrameDuration }) {\r\n\t\tthis._transitionOverlayOffsetX = Math.max(this._transitionOverlayOffsetX - prevFrameDuration / SceneManager.transitionDuration, -1);\r\n\r\n\t\tif (this._transitionOverlayOffsetX === -1) this._transitionOverlayOffsetX = 1;\r\n\t}\r\n\r\n\trender(ctx) {\r\n\t\tif (this._currentScene) this._currentScene.render(ctx);\r\n\t\tif (this._transitionOverlayOffsetX !== 1) this._renderTransitionOverlay(ctx);\r\n\t}\r\n\r\n\t_renderTransitionOverlay(ctx) {\r\n\t\tconst overlayPositionX = this._canvas.width * this._transitionOverlayOffsetX;\r\n\t\tDraw.rect(ctx, overlayPositionX, 0, this._canvas.width, this._canvas.height, Color.blueDeep.key)\r\n\t}\r\n\r\n\t_getScenesCommonProps() {\r\n\t\treturn {\r\n\t\t\tcanvas: this._canvas,\r\n\t\t\tassets: this._assets,\r\n\t\t\tstate: this._state,\r\n\t\t\tsceneManager: this,\r\n\t\t}\r\n\t}\r\n\r\n\t_isInTransition() {\r\n\t\treturn this._futureScene || this._transitionOverlayOffsetX !== 1;\r\n\t}\r\n\r\n\thandleClick(event) {\r\n\t\tif (this._isInTransition()) return;\r\n\r\n\t\tif (this._currentScene) this._currentScene.handleClick(event);\r\n\t}\r\n\r\n\thandleStartDragging(event) {\r\n\t\tif (this._isInTransition()) return;\r\n\r\n\t\tif (this._currentScene) this._currentScene.handleStartDragging(event);\r\n\t}\r\n\r\n\thandleDragging(event) {\r\n\t\tif (this._isInTransition()) return;\r\n\r\n\t\tif (this._currentScene) this._currentScene.handleDragging(event);\r\n\t}\r\n\r\n\thandleEndDragging(event) {\r\n\t\tif (this._isInTransition()) return;\r\n\r\n\t\tif (this._currentScene) this._currentScene.handleEndDragging(event);\r\n\t}\r\n\r\n\tshowOpenScene() {\r\n\t\tthis._futureScene = new OpenScene(this._getScenesCommonProps());\r\n\t}\r\n\r\n\tshowCoreScene() {\r\n\t\tthis._futureScene = new CoreScene(this._getScenesCommonProps());\r\n\t}\r\n\r\n\tshowResultScene(movesCounter) {\r\n\t\tthis._futureScene = new ResultScene({ ...this._getScenesCommonProps(), movesCounter });\r\n\t}\r\n\r\n\tstatic transitionDuration = 300;\r\n}","export default class Renderer {\r\n\tconstructor({ ctx, canvas, sceneManager }) {\r\n\t\tthis._canvas = canvas;\r\n\t\tthis._ctx = ctx;\r\n\t\tthis._sceneManager = sceneManager;\r\n\t}\r\n\r\n\trender() {\r\n\t\tthis._clear();\r\n\t\tthis._renderScene();\r\n\t}\r\n\r\n\t_clear() {\r\n\t\tthis._ctx.clearRect(0, 0, this._canvas.width, this._canvas.height);\r\n\t}\r\n\r\n\t_renderScene() {\r\n\t\tthis._sceneManager.render(this._ctx);\r\n\t}\r\n}","import Assets from './Assets';\r\nimport State from './State';\r\nimport SceneManager from './SceneManager';\r\nimport Renderer from './Renderer';\r\nimport YSDK from './YSDK';\r\n\r\nexport default class Game {\r\n\tconstructor(canvas) {\r\n\t\tthis._canvas = canvas;\r\n\t\tthis._ctx = canvas.getContext('2d');\r\n\t\tthis._setRenderSize();\r\n\r\n\t\tthis._assets = new Assets();\r\n\r\n\t\tthis._state = new State({\r\n\t\t\tassets: this._assets,\r\n\t\t});\r\n\r\n\t\tthis._sceneManager = new SceneManager({\r\n\t\t\tcanvas: this._canvas,\r\n\t\t\tassets: this._assets,\r\n\t\t\tstate: this._state,\r\n\t\t});\r\n\r\n\t\tthis._renderer = new Renderer({\r\n\t\t\tcanvas: this._canvas,\r\n\t\t\tctx: this._ctx,\r\n\t\t\tsceneManager: this._sceneManager,\r\n\t\t});\r\n\r\n\t\tthis._prevTimestamp = null;\r\n\t\tthis._draggingStarted = false;\r\n\r\n\t\tthis._addEventHandlers();\r\n\t\tthis._startGame();\r\n\t}\r\n\r\n\tasync _startGame() {\r\n\t\tawait this._assets.load();\r\n\t\tawait this._loadPlayerStats();\r\n\r\n\t\tthis._sceneManager.showOpenScene();\r\n\r\n\t\trequestAnimationFrame(timestamp => {\r\n\t\t\tthis._gameLoop(timestamp);\r\n\t\t});\r\n\t}\r\n\r\n\tasync _loadPlayerStats() {\r\n\t\tconst { level } = await YSDK.getPlayerStats();\r\n\t\tif (level) this._state.setLevel(level);\r\n\t}\r\n\t\r\n\t_gameLoop(timestamp) {\r\n\t\trequestAnimationFrame(nextTimestamp => {\r\n\t\t\tthis._gameLoop(nextTimestamp);\r\n\t\t});\r\n\r\n\t\tconst prevTimestamp = this._prevTimestamp || timestamp;\r\n\t\tconst prevFrameDuration = timestamp - prevTimestamp;\r\n\t\tconst delta = prevFrameDuration / 1000;\r\n\t\tthis._sceneManager.update({ delta, prevFrameDuration, timestamp });\r\n\t\tthis._prevTimestamp = timestamp;\r\n\r\n\t\tthis._renderer.render();\r\n\t}\r\n\r\n\t_addEventHandlers() {\r\n\t\tthis._canvas.addEventListener('click', event => this._handleClick(event))\r\n\t\tthis._canvas.addEventListener('mousedown', event => this._handleStartDragging(event))\r\n\t\twindow.addEventListener('mousemove', event => this._handleDragging(event))\r\n\t\twindow.addEventListener('mouseup', event => this._handleEndDragging(event))\r\n\t\tthis._canvas.addEventListener('touchstart', event => this._handleStartDragging(event));\r\n\t\twindow.addEventListener('touchmove', event => this._handleDragging(event));\r\n\t\twindow.addEventListener('touchend', event => this._handleEndDragging(event));\r\n\t\twindow.addEventListener('resize', () => this._setRenderSize());\r\n\t}\r\n\r\n\t_handleClick(event) {\r\n\t\tconst { clientX: x, clientY: y } = event;\r\n\t\tconst position = this._transformClickPosition({ x, y });\r\n\t\tthis._sceneManager.handleClick({ position });\r\n\t}\r\n\r\n\t_handleStartDragging(event) {\r\n\t\tthis._draggingStarted = true;\r\n\t\tconst { clientX: x, clientY: y } = event.touches?.[0] || event;\r\n\t\tconst position = this._transformClickPosition({ x, y });\r\n\t\tthis._sceneManager.handleStartDragging({ position });\r\n\t}\r\n\r\n\t_handleEndDragging(event) {\r\n\t\tthis._draggingStarted = false;\r\n\t\tconst { clientX: x, clientY: y } = event.touches?.[0] || event;\r\n\t\tconst position = this._transformClickPosition({ x, y });\r\n\t\tthis._sceneManager.handleEndDragging({ position });\r\n\t}\r\n\r\n\t_handleDragging(event) {\r\n\t\tif (!this._draggingStarted) return;\r\n\t\tconst { clientX: x, clientY: y } = event.touches?.[0] || event;\r\n\t\tconst position = this._transformClickPosition({ x, y });\r\n\t\tthis._sceneManager.handleDragging({ position });\r\n\t}\r\n\r\n\t_transformClickPosition({ x, y }) {\r\n\t\tx = x - this._canvas.getBoundingClientRect().left;\r\n\t\tx = x * (this._canvas.width / parseFloat(this._canvas.style.width));\r\n\t\ty = y - this._canvas.getBoundingClientRect().top;\r\n\t\ty = y * (this._canvas.height / parseFloat(this._canvas.style.height));\r\n\t\treturn { x, y };\r\n\t}\r\n\r\n\t_setRenderSize() {\r\n\t\tconst screenWidth = document.documentElement.clientWidth;\r\n\t\tconst screenHeight = document.documentElement.clientHeight;\r\n\t\t\r\n\t\tlet aspectRatio = this._canvas.width / this._canvas.height;\r\n\r\n\t\tlet renderHeight = screenHeight;\r\n\t\tlet renderWidth = renderHeight * aspectRatio;\r\n\r\n\t\tif (renderWidth > screenWidth) {\r\n\t\t\taspectRatio = this._canvas.height / this._canvas.width;\r\n\r\n\t\t\trenderWidth = screenWidth;\r\n\t\t\trenderHeight = renderWidth * aspectRatio;\r\n\t\t}\r\n\r\n\t\tthis._canvas.style.width = renderWidth + 'px';\r\n\t\tthis._canvas.style.height = renderHeight + 'px';\r\n\t}\r\n}\r\n","import styles from './assets/styles/index.styl';\r\n\r\nimport Game from './modules/Game';\r\nimport YSDK from './modules/YSDK';\r\n\r\naddEventListener('DOMContentLoaded', async () => {\r\n\tawait YSDK.initYSDK();\r\n\tawait YSDK.initPlayer();\r\n\r\n\tnew Game(document.getElementById('colored-tiles'));\r\n})"],"names":["___CSS_LOADER_URL_IMPORT_0___","URL","___CSS_LOADER_EXPORT___","___CSS_LOADER_URL_REPLACEMENT_0___","push","module","id","exports","cssWithMappingToString","list","toString","this","map","item","content","needLayer","concat","length","join","i","modules","media","dedupe","supports","layer","undefined","alreadyImportedModules","k","_k","url","options","String","__esModule","default","test","slice","hash","needQuotes","replace","cssMapping","btoa","base64","unescape","encodeURIComponent","JSON","stringify","data","sourceMapping","stylesInDOM","getIndexByIdentifier","identifier","result","modulesToDom","idCountMap","identifiers","base","count","indexByIdentifier","obj","css","sourceMap","references","updater","addElementStyle","byIndex","splice","api","domAPI","update","newObj","remove","lastIdentifiers","newList","index","newLastIdentifiers","_i","_index","memo","insert","style","target","styleTarget","document","querySelector","window","HTMLIFrameElement","contentDocument","head","e","getTarget","Error","appendChild","element","createElement","setAttributes","attributes","styleElement","nonce","setAttribute","textStore","replaceText","replacement","filter","Boolean","apply","styleSheet","cssText","cssNode","createTextNode","childNodes","removeChild","insertBefore","singletonData","singleton","singletonCounter","styleIndex","insertStyleElement","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","m","n","getter","d","a","definition","key","o","Object","defineProperty","enumerable","get","g","globalThis","Function","prop","prototype","hasOwnProperty","call","scriptUrl","importScripts","location","currentScript","src","scripts","getElementsByTagName","p","b","baseURI","self","href","nc","Assets","constructor","_assets","_loaded","load","Promise","resolve","forEach","source","type","fileName","split","pop","imagesTypes","includes","_loadImage","soundsTypes","_loadSound","_increaseLoaded","image","Image","addEventListener","file","static","State","assets","_level","_gold","increaseLevel","nextLevel","resetLevel","setLevel","level","getLevel","Draw","ctx","x","y","width","height","color","opacity","globalAlpha","fillStyle","fillRect","radius","beginPath","moveTo","arcTo","fill","thickness","strokeStyle","lineWidth","stroke","text","size","font","fillText","Color","Text","fontSize","actualBoundingBoxAscent","actualBoundingBoxDescent","measureText","textWidth","textHeight","Button","position","label","_position","_size","_label","render","roundedRect","blueNight","calcTextMetrics","labelPositionX","labelPositionY","white","isPressed","clickPosition","OpenScene","canvas","state","sceneManager","_canvas","_state","_sceneManager","_levelCounter","_startButton","_initButton","time","rect","blueDeep","_renderTitle","_renderLevelCounter","title","string","titleFontSize","stringPositionX","stringPositionY","titlePositionY","titleLineHeight","levelCounterHintWidth","levelCounterHint","levelCounterHintFontSize","levelCounterHintPositionX","levelCounterHintPositionY","yellow","levelCounter","levelCounterWidth","levelCounterFontSize","levelCounterPositionX","levelCounterPositionY","handleClick","showCoreScene","handleStartDragging","handleDragging","handleEndDragging","startButtonWidth","startButtonPositionY","buttonsHeight","Tile","_color","_opacity","_scaleFactor","positionX","positionY","getScaleFactor","setScaleFactor","scaleFactor","getPosition","setPosition","getColor","getOpacity","setOpacity","blue","green","sea","red","purple","orange","LevelPreview","_map","_columnWidth","_rowHeight","_setMetrics","row","colorId","tilePositionX","gap","tilePositionY","tileColor","colors","find","tileRadius","xLength","yLength","LevelController","isMatch","currentFieldMap","every","cell","getTile","getMapLengths","getColorsCounters","colorsId","flat","Array","from","Set","counter","Cell","coords","_coords","_tile","_detachedTile","setTile","tile","detachedTile","detachTile","getCoords","Random","to","Math","round","random","TileScaleAnimation","delay","_delay","_startTime","_finished","timestamp","progressTime","duration","progressDelta","pow","path","isFinished","YSDK","YaGames","init","then","ysdk","features","LoadingAPI","ready","console","log","catch","err","getPlayer","scopes","player","setStats","getStats","Field","levelController","_levelController","_maxOutOfBoundsX","_maxOutOfBoundsY","_setMap","_setTiles","_animations","_startDraggingPosition","_startDraggingCoords","_prevDraggingPosition","_draggingAxis","_detachedTiles","_levelComplete","_movesCounter","animation","_isFieldIncludesPosition","getCoordsByPosition","_setDraggingAxis","_detachTiles","_moveRow","_moveColumn","draggingPosition","xOffset","yOffset","abs","event","axis","sort","tilesWasUpdated","tileWasUpdated","_attachFirstDetachedTileToCell","_handleDraggingResult","shift","getPositionByCoords","async","_savePlayerStats","_startLevelCompliteAnimation","setTimeout","showResultScene","savePlayerStats","offset","currentPosition","newPosition","floor","_getCellByCoords","colorsCounters","colorCounter","randomIndex","getRandomFromRange","_createTile","CoreScene","_levelPreview","_field","ResultScene","movesCounter","_continueButton","_renderMovesCounter","movesCounterHintWidth","movesCounterHint","movesCounterHintFontSize","movesCounterHintPositionX","movesCounterHintPositionY","movesCounterWidth","movesCounterFontSize","movesCounterPositionX","movesCounterPositionY","continueButtonWidth","continueButtonPositionY","SceneManager","_currentScene","_futureScene","_transitionOverlayOffsetX","_updateSceneOut","_updateSceneIn","prevFrameDuration","max","transitionDuration","_renderTransitionOverlay","overlayPositionX","_getScenesCommonProps","_isInTransition","showOpenScene","Renderer","_ctx","_clear","_renderScene","clearRect","Game","getContext","_setRenderSize","_renderer","_prevTimestamp","_draggingStarted","_addEventHandlers","_startGame","_loadPlayerStats","requestAnimationFrame","_gameLoop","getPlayerStats","nextTimestamp","delta","_handleClick","_handleStartDragging","_handleDragging","_handleEndDragging","clientX","clientY","_transformClickPosition","touches","getBoundingClientRect","left","parseFloat","top","screenWidth","documentElement","clientWidth","screenHeight","clientHeight","aspectRatio","renderHeight","renderWidth","initYSDK","initPlayer","getElementById"],"sourceRoot":""}