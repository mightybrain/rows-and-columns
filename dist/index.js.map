{"version":3,"file":"index.js","mappings":"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","sources":["webpack://colored-tiles/./src/assets/styles/index.styl","webpack://colored-tiles/./node_modules/css-loader/dist/runtime/api.js","webpack://colored-tiles/./node_modules/css-loader/dist/runtime/getUrl.js","webpack://colored-tiles/./node_modules/css-loader/dist/runtime/sourceMaps.js","webpack://colored-tiles/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://colored-tiles/./node_modules/style-loader/dist/runtime/insertBySelector.js","webpack://colored-tiles/./node_modules/style-loader/dist/runtime/insertStyleElement.js","webpack://colored-tiles/./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js","webpack://colored-tiles/./node_modules/style-loader/dist/runtime/singletonStyleDomAPI.js","webpack://colored-tiles/webpack/bootstrap","webpack://colored-tiles/webpack/runtime/compat get default export","webpack://colored-tiles/webpack/runtime/define property getters","webpack://colored-tiles/webpack/runtime/global","webpack://colored-tiles/webpack/runtime/hasOwnProperty shorthand","webpack://colored-tiles/webpack/runtime/publicPath","webpack://colored-tiles/webpack/runtime/jsonp chunk loading","webpack://colored-tiles/webpack/runtime/nonce","webpack://colored-tiles/./src/assets/styles/index.styl?5fbf","webpack://colored-tiles/./src/modules/Assets.js","webpack://colored-tiles/./src/modules/Levels.js","webpack://colored-tiles/./src/modules/YSDK.js","webpack://colored-tiles/./src/modules/State.js","webpack://colored-tiles/./src/modules/Draw.js","webpack://colored-tiles/./src/modules/Color.js","webpack://colored-tiles/./src/modules/Text.js","webpack://colored-tiles/./src/modules/Button.js","webpack://colored-tiles/./src/modules/RatingPreview.js","webpack://colored-tiles/./src/modules/LockedButton.js","webpack://colored-tiles/./src/modules/OpenScene.js","webpack://colored-tiles/./src/modules/AboutScene.js","webpack://colored-tiles/./src/modules/LevelButton.js","webpack://colored-tiles/./src/modules/Tile.js","webpack://colored-tiles/./src/modules/Level.js","webpack://colored-tiles/./src/modules/LevelsScene.js","webpack://colored-tiles/./src/modules/LevelPreview.js","webpack://colored-tiles/./src/modules/Cell.js","webpack://colored-tiles/./src/modules/TileScaleAnimation.js","webpack://colored-tiles/./src/modules/Field.js","webpack://colored-tiles/./src/modules/CoreScene.js","webpack://colored-tiles/./src/modules/ResultScene.js","webpack://colored-tiles/./src/modules/SceneManager.js","webpack://colored-tiles/./src/modules/Game.js","webpack://colored-tiles/./src/index.js"],"sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_GET_URL_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/getUrl.js\";\nvar ___CSS_LOADER_URL_IMPORT_0___ = new URL(\"../fonts/Nunito-Black.woff2\", import.meta.url);\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\nvar ___CSS_LOADER_URL_REPLACEMENT_0___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"@font-face{font-family:'Nunito';src:url(\" + ___CSS_LOADER_URL_REPLACEMENT_0___ + \") format('woff2');font-weight:900;font-style:#000}body{position:fixed;top:0;left:0;display:flex;justify-content:center;width:100%;height:100%;margin:0;padding:0;overflow:hidden;background-color:#0f335a}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/assets/styles/index.styl\"],\"names\":[],\"mappings\":\"AAAA,WACE,oBAAY,CACZ,2DAAqC,CACrC,eAAY,CACZ,eAAW,CAEb,KACE,cAAS,CACT,KAAI,CACJ,MAAK,CACL,YAAQ,CACR,sBAAgB,CAChB,UAAM,CACN,WAAO,CACP,QAAO,CACP,SAAQ,CACR,eAAS,CACT,wBAAiB\",\"sourcesContent\":[\"@font-face\\r\\n  font-family 'Nunito'\\r\\n  src url('../fonts/Nunito-Black.woff2') format('woff2')\\r\\n  font-weight 900\\r\\n  font-style black\\r\\n\\r\\nbody\\r\\n  position fixed\\r\\n  top 0\\r\\n  left 0\\r\\n  display flex\\r\\n  justify-content center\\r\\n  width 100%\\r\\n  height 100%\\r\\n  margin 0\\r\\n  padding 0\\r\\n  overflow hidden\\r\\n  background-color #0F335A\\r\\n\\t\\t\\t\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = [];\n\n  // return the list of modules as css string\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n      content += cssWithMappingToString(item);\n      if (needLayer) {\n        content += \"}\";\n      }\n      if (item[2]) {\n        content += \"}\";\n      }\n      if (item[4]) {\n        content += \"}\";\n      }\n      return content;\n    }).join(\"\");\n  };\n\n  // import a list of modules into the list\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n    var alreadyImportedModules = {};\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n      list.push(item);\n    }\n  };\n  return list;\n};","\"use strict\";\n\nmodule.exports = function (url, options) {\n  if (!options) {\n    options = {};\n  }\n  if (!url) {\n    return url;\n  }\n  url = String(url.__esModule ? url.default : url);\n\n  // If url is already wrapped in quotes, remove them\n  if (/^['\"].*['\"]$/.test(url)) {\n    url = url.slice(1, -1);\n  }\n  if (options.hash) {\n    url += options.hash;\n  }\n\n  // Should url be wrapped?\n  // See https://drafts.csswg.org/css-values-3/#urls\n  if (/[\"'() \\t\\n]|(%20)/.test(url) || options.needQuotes) {\n    return \"\\\"\".concat(url.replace(/\"/g, '\\\\\"').replace(/\\n/g, \"\\\\n\"), \"\\\"\");\n  }\n  return url;\n};","\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n  if (!cssMapping) {\n    return content;\n  }\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    return [content].concat([sourceMapping]).join(\"\\n\");\n  }\n  return [content].join(\"\\n\");\n};","\"use strict\";\n\nvar stylesInDOM = [];\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n  for (var i = 0; i < stylesInDOM.length; i++) {\n    if (stylesInDOM[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n  return result;\n}\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var indexByIdentifier = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3],\n      supports: item[4],\n      layer: item[5]\n    };\n    if (indexByIdentifier !== -1) {\n      stylesInDOM[indexByIdentifier].references++;\n      stylesInDOM[indexByIdentifier].updater(obj);\n    } else {\n      var updater = addElementStyle(obj, options);\n      options.byIndex = i;\n      stylesInDOM.splice(i, 0, {\n        identifier: identifier,\n        updater: updater,\n        references: 1\n      });\n    }\n    identifiers.push(identifier);\n  }\n  return identifiers;\n}\nfunction addElementStyle(obj, options) {\n  var api = options.domAPI(options);\n  api.update(obj);\n  var updater = function updater(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {\n        return;\n      }\n      api.update(obj = newObj);\n    } else {\n      api.remove();\n    }\n  };\n  return updater;\n}\nmodule.exports = function (list, options) {\n  options = options || {};\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDOM[index].references--;\n    }\n    var newLastIdentifiers = modulesToDom(newList, options);\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n      var _index = getIndexByIdentifier(_identifier);\n      if (stylesInDOM[_index].references === 0) {\n        stylesInDOM[_index].updater();\n        stylesInDOM.splice(_index, 1);\n      }\n    }\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","\"use strict\";\n\nvar memo = {};\n\n/* istanbul ignore next  */\nfunction getTarget(target) {\n  if (typeof memo[target] === \"undefined\") {\n    var styleTarget = document.querySelector(target);\n\n    // Special case to return head of iframe instead of iframe itself\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n      try {\n        // This will throw an exception if access to iframe is blocked\n        // due to cross-origin restrictions\n        styleTarget = styleTarget.contentDocument.head;\n      } catch (e) {\n        // istanbul ignore next\n        styleTarget = null;\n      }\n    }\n    memo[target] = styleTarget;\n  }\n  return memo[target];\n}\n\n/* istanbul ignore next  */\nfunction insertBySelector(insert, style) {\n  var target = getTarget(insert);\n  if (!target) {\n    throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n  }\n  target.appendChild(style);\n}\nmodule.exports = insertBySelector;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction insertStyleElement(options) {\n  var element = document.createElement(\"style\");\n  options.setAttributes(element, options.attributes);\n  options.insert(element, options.options);\n  return element;\n}\nmodule.exports = insertStyleElement;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction setAttributesWithoutAttributes(styleElement) {\n  var nonce = typeof __webpack_nonce__ !== \"undefined\" ? __webpack_nonce__ : null;\n  if (nonce) {\n    styleElement.setAttribute(\"nonce\", nonce);\n  }\n}\nmodule.exports = setAttributesWithoutAttributes;","\"use strict\";\n\n/* istanbul ignore next  */\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join(\"\\n\");\n  };\n}();\n\n/* istanbul ignore next  */\nfunction apply(styleElement, index, remove, obj) {\n  var css;\n  if (remove) {\n    css = \"\";\n  } else {\n    css = \"\";\n    if (obj.supports) {\n      css += \"@supports (\".concat(obj.supports, \") {\");\n    }\n    if (obj.media) {\n      css += \"@media \".concat(obj.media, \" {\");\n    }\n    var needLayer = typeof obj.layer !== \"undefined\";\n    if (needLayer) {\n      css += \"@layer\".concat(obj.layer.length > 0 ? \" \".concat(obj.layer) : \"\", \" {\");\n    }\n    css += obj.css;\n    if (needLayer) {\n      css += \"}\";\n    }\n    if (obj.media) {\n      css += \"}\";\n    }\n    if (obj.supports) {\n      css += \"}\";\n    }\n  }\n\n  // For old IE\n  /* istanbul ignore if  */\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = styleElement.childNodes;\n    if (childNodes[index]) {\n      styleElement.removeChild(childNodes[index]);\n    }\n    if (childNodes.length) {\n      styleElement.insertBefore(cssNode, childNodes[index]);\n    } else {\n      styleElement.appendChild(cssNode);\n    }\n  }\n}\nvar singletonData = {\n  singleton: null,\n  singletonCounter: 0\n};\n\n/* istanbul ignore next  */\nfunction domAPI(options) {\n  if (typeof document === \"undefined\") return {\n    update: function update() {},\n    remove: function remove() {}\n  };\n\n  // eslint-disable-next-line no-undef,no-use-before-define\n  var styleIndex = singletonData.singletonCounter++;\n  var styleElement =\n  // eslint-disable-next-line no-undef,no-use-before-define\n  singletonData.singleton || (\n  // eslint-disable-next-line no-undef,no-use-before-define\n  singletonData.singleton = options.insertStyleElement(options));\n  return {\n    update: function update(obj) {\n      apply(styleElement, styleIndex, false, obj);\n    },\n    remove: function remove(obj) {\n      apply(styleElement, styleIndex, true, obj);\n    }\n  };\n}\nmodule.exports = domAPI;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) scriptUrl = scripts[scripts.length - 1].src\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","__webpack_require__.b = document.baseURI || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t179: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// no jsonp function","__webpack_require__.nc = undefined;","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/singletonStyleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      \n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/stylus-loader/dist/cjs.js!./index.styl\";\n      \n      \n\nvar options = {};\n\n;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/stylus-loader/dist/cjs.js!./index.styl\";\n       export default content && content.locals ? content.locals : undefined;\n","export default class Assets {\r\n\tconstructor() {\r\n\t\tthis._assets = {\r\n\t\t\t\r\n\t\t};\r\n\t\tthis._loaded = 0;\r\n\t}\r\n\r\n\tload() {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tif (!Assets.data.length) resolve();\r\n\t\t\t\r\n\t\t\tAssets.data.forEach(source => {\r\n\t\t\t\tconst type = source.fileName.split('.').pop();\r\n\t\t\t\tif (Assets.imagesTypes.includes(type)) this._loadImage(source, resolve);\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\r\n\t_increaseLoaded(resolve) {\r\n\t\tthis._loaded += 1;\r\n\t\tif (this._loaded === Assets.data.length) resolve();\r\n\t}\r\n\r\n\t_loadImage(source, resolve) {\r\n\t\tconst image = new Image();\r\n\r\n\t\timage.addEventListener('load', () => {\r\n\t\t\tthis._assets[source.fileName] = image;\r\n\t\t\tthis._increaseLoaded(resolve);\r\n\t\t})\r\n\r\n\t\timage.src = source.file;\r\n\t}\r\n\r\n\tget(fileName) {\r\n\t\treturn this._assets[fileName];\r\n\t}\r\n\r\n\tstatic imagesTypes = ['png'];\r\n\tstatic data = [\r\n\t\t{\r\n\t\t\tfileName: 'star-yellow.png',\r\n\t\t\tfile: require('../assets/images/star-yellow.png'),\r\n\t\t},\r\n\t\t{\r\n\t\t\tfileName: 'star-blue.png',\r\n\t\t\tfile: require('../assets/images/star-blue.png'),\r\n\t\t},\r\n\t\t{\r\n\t\t\tfileName: 'star-green.png',\r\n\t\t\tfile: require('../assets/images/star-green.png'),\r\n\t\t},\r\n\t];\r\n}","export default class Levels {\r\n  constructor({ levels }) {\r\n    this._levels = levels;\r\n  }\r\n\r\n  getLevelsList() {\r\n\t\treturn Object.keys(levels).reduce((total, key) => total.concat(this._levels[key]), []);\r\n  }\r\n\r\n  getLevelById(id) {\r\n    id = +id;\r\n    for (let key in this._levels) {\r\n      const level = this._levels[key].find(item => item.id === id);\r\n      if (level) return level;\r\n    }\r\n  }\r\n\r\n  getLevelByKeyAndIndex(key, index) {\r\n    return this._levels[key][index];\r\n  }\r\n\r\n  getLevelsByKey(key) {\r\n    return this._levels[key];\r\n  }\r\n\r\n  getLevelScore(moves, levelId) {\r\n    const level = this.getLevelById(levelId);\r\n    return moves <= level.moves ? Levels.maxScore : moves <= level.moves * 2 ? Levels.maxScore - 1 : Levels.minScore;\r\n  }\r\n\r\n  static maxScore = 3;\r\n  static minScore = 1;\r\n}","export default class YSDK {\r\n  static ysdk = null;\r\n  static player = null;\r\n  \r\n  static async initYSDK() {\r\n    return YaGames\r\n      .init()\r\n      .then(ysdk => {\r\n        YSDK.ysdk = ysdk;\r\n        ysdk.features.LoadingAPI?.ready();\r\n        console.log('Yandex SDK initialized');\r\n      })\r\n      .catch(err => {\r\n        console.log('Ошибка при инициализации YSDK');\r\n      });\r\n  }\r\n  \r\n  static async initPlayer() {\r\n    return YSDK.ysdk\r\n      .getPlayer({ scopes: false })\r\n      .then(player => {\r\n        YSDK.player = player;\r\n        console.log('Player initialized');\r\n      })\r\n      .catch(err => {\r\n        console.log('Ошибка при инициализации объекта Player');\r\n      });\r\n  }\r\n  \r\n  static async savePlayerStats(data) {\r\n    return YSDK.player\r\n      .setStats(data)\r\n      .then(() => {\r\n        console.log('Player data is saved');\r\n      })\r\n      .catch(err => {\r\n        console.log('Ошибка при сохранении данных игрока');\r\n      });\r\n  }\r\n  \r\n  static async getPlayerStats() {\r\n    return YSDK.player\r\n      .getStats()\r\n      .then(data => {\r\n        console.log('Получены сохраненные данные игрока');\r\n        return data;\r\n      })\r\n      .catch(err => {\r\n        console.log('Ошибка при получении данных игрока');\r\n      });\r\n  }\r\n}","import YSDK from './YSDK';\r\n\r\nexport default class State {\r\n\tconstructor({ levels }) {\r\n\t\tthis._levels = levels;\r\n\r\n\t\tthis._levelsScores = {\r\n\r\n\t\t};\r\n\t\tthis._levelsMoves = {\r\n\r\n\t\t};\r\n\t}\r\n\r\n\tasync resetPlayerStats() {\r\n\t\tthis._levelsMoves = {};\r\n\t\tthis._levelsScores = {};\r\n\t\t//await YSDK.savePlayerStats(this._levelsMoves);\r\n\t}\r\n\r\n\tasync loadPlayerStats() {\r\n\t\tconst levelsMoves = await YSDK.getPlayerStats();\r\n\t\tif (levelsMoves) {\r\n\t\t\tthis._levelsMoves = levelsMoves;\r\n\r\n\t\t\tfor (let id in levelsMoves) {\r\n\t\t\t\tthis._levelsScores[id] = this._levels.getLevelScore(levelsMoves[id], id);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgetRating() {\r\n\t\treturn Object.values(this._levelsScores).reduce((total, item) => total + item, 0);\r\n\t}\r\n\r\n\tasync setLevelResult(levelId, moves, score) {\r\n\t\tconst prevMoves = this._levelsMoves[levelId];\r\n\t\tif (!prevMoves || prevMoves > moves) {\r\n\t\t\tthis._levelsScores[levelId] = score;\r\n\t\t\tthis._levelsMoves[levelId] = moves;\r\n\t\t\t//await YSDK.savePlayerStats(this._levelsMoves);\r\n\t\t}\r\n\t}\r\n\r\n\tgetLevelPrevScore(levelId) {\r\n\t\treturn this._levelsScores[levelId];\r\n\t}\r\n\r\n\tgetLevelPrevMoves(levelsId) {\r\n\t\treturn this._levelsMoves[levelsId];\r\n\t}\r\n}","export default class Draw {\r\n  static rect(ctx, x, y, width, height, colorKey, opacity = 1) {\r\n    ctx.globalAlpha = opacity;\r\n\t\tctx.fillStyle = colorKey;\r\n\t\tctx.fillRect(x, y, width, height);\r\n    ctx.globalAlpha = 1;\r\n  }\r\n\r\n  static roundedRect(ctx, x, y, width, height, radius, colorKey, opacity = 1) {\r\n    ctx.globalAlpha = opacity;\r\n    ctx.fillStyle = colorKey;\r\n    ctx.beginPath();\r\n    ctx.moveTo(x, y + radius);\r\n    ctx.arcTo(x, y + height, x + radius, y + height, radius);\r\n    ctx.arcTo(x + width, y + height, x + width, y + height - radius, radius);\r\n    ctx.arcTo(x + width, y, x + width - radius, y, radius);\r\n    ctx.arcTo(x, y, x, y + radius, radius);\r\n    ctx.fill();\r\n    ctx.globalAlpha = 1;\r\n  }\r\n  \r\n  static stroke(ctx, thickness, colorKey) {\r\n    ctx.strokeStyle = colorKey;\r\n    ctx.lineWidth = thickness;\r\n    ctx.stroke();\r\n  }\r\n  \r\n  static text(ctx, x, y, text, size, colorKey, opacity = 1) {\r\n    ctx.globalAlpha = opacity;\r\n    ctx.fillStyle = colorKey;\r\n    ctx.font = `${size}px Nunito`;\r\n    ctx.fillText(text, x, y);\r\n    ctx.globalAlpha = 1;\r\n  }\r\n\r\n  static image(ctx, dx, dy, dWidth, dHeight, image, opacity = 1) {\r\n    ctx.globalAlpha = opacity;\r\n    ctx.drawImage(image, dx, dy, dWidth, dHeight);\r\n    ctx.globalAlpha = 1;\r\n  }\r\n\r\n  static slicedImage(ctx, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight, image, opacity = 1) {\r\n    ctx.globalAlpha = opacity;\r\n    ctx.drawImage(image, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight);\r\n    ctx.globalAlpha = 1;\r\n  }\r\n}","export default class Color {\r\n  static blueDeep = {\r\n    id: 2,\r\n    key: '#0F335A',\r\n  };\r\n  static blueNight = {\r\n    id: 3,\r\n    key: '#143D6C',\r\n  };\r\n  static blue = {\r\n    id: 4,\r\n    key: '#4A5AEC',\r\n  };\r\n  static green = {\r\n    id: 5,\r\n    key: '#73AE37',\r\n  };\r\n  static sea = {\r\n    id: 6,\r\n    key: '#4BD5F5',\r\n  };\r\n  static red = {\r\n    id: 7,\r\n    key: '#D74E23',\r\n  };\r\n  static purple = {\r\n    id: 8,\r\n    key: '#E436EE',\r\n  };\r\n  static orange = {\r\n    id: 9,\r\n    key: '#FF891C',\r\n  };\r\n  static yellow = {\r\n    id: 10,\r\n    key: '#FFC530',\r\n  };\r\n  static white = {\r\n    id: 11,\r\n    key: '#FFFFFF',\r\n  };\r\n}","export default class Text {\r\n  static calcTextMetrics(ctx, text, fontSize) {\r\n    ctx.font = `${fontSize}px Nunito`;\r\n    const { width, actualBoundingBoxAscent, actualBoundingBoxDescent } = ctx.measureText(text);\r\n    return { textWidth: width, textHeight: actualBoundingBoxAscent + actualBoundingBoxDescent }\r\n  }\r\n\r\n  static calcMultistringTextMetrics(ctx, text, fontSize, lineHeight) {\r\n    return text\r\n      .map((paragraph, pIndex) => {\r\n\r\n        const prevParagraphs = text.slice(0, pIndex);\r\n        const prevParagraphsHeight = prevParagraphs.reduce((total, item) => total + item.length * lineHeight, 0);\r\n        const spaceBetweenPrevParagraphs = prevParagraphs.length * lineHeight;\r\n\r\n        const paragraphPositionY = prevParagraphsHeight + spaceBetweenPrevParagraphs;\r\n\r\n        return paragraph.map((string, sIndex) => {\r\n          const { textWidth: width } = Text.calcTextMetrics(ctx, string, fontSize);\r\n          return {\r\n            string,\r\n            width,\r\n            positionY: paragraphPositionY + sIndex * lineHeight + fontSize,\r\n          }\r\n        })\r\n\r\n      })\r\n      .flat();\r\n  }\r\n}","import Text from './Text';\r\nimport Draw from './Draw';\r\nimport Color from './Color';\r\n\r\nexport default class Button {\r\n  constructor({ ctx, position, size, label }) {\r\n    this._ctx = ctx;\r\n    this._position = position;\r\n    this._size = size;\r\n    \r\n    this._label = label;\r\n    this._labelPosition = {\r\n      x: 0,\r\n      y: 0,\r\n    };\r\n    this._setLabelPosition();\r\n  }\r\n\r\n  render() {\r\n    Draw.roundedRect(this._ctx, this._position.x, this._position.y, this._size.width, this._size.height, Button.radius, Color.blueNight.key);\r\n    \r\n    Draw.text(this._ctx, this._labelPosition.x, this._labelPosition.y, this._label, Button.fontSize, Color.white.key);\r\n  }\r\n\r\n  isPressed(clickPosition) {\r\n    return (\r\n      clickPosition.x > this._position.x && clickPosition.x < this._position.x + this._size.width &&\r\n      clickPosition.y > this._position.y && clickPosition.y < this._position.y + this._size.height\r\n    );\r\n  }\r\n\r\n  _setLabelPosition() {\r\n    const { textWidth } = Text.calcTextMetrics(this._ctx, this._label, Button.fontSize);\r\n\r\n    this._labelPosition.x = this._position.x + this._size.width / 2 - textWidth / 2;\r\n    this._labelPosition.y = this._position.y + this._size.height / 2 + Button.fontSize / 3;\r\n  }\r\n\r\n  static height = 74;\r\n  static fontSize = 32;\r\n  static radius = 37;\r\n}","import Draw from './Draw';\r\nimport Text from './Text';\r\nimport Color from './Color';\r\n\r\nexport default class RatingPreview {\r\n  constructor({ ctx, state, assets }) {\r\n    this._ctx = ctx;\r\n    this._state = state;\r\n    this._assets = assets;\r\n\r\n    this._icon = this._assets.get('star-yellow.png');\r\n    \r\n    this._rating = this._state.getRating();\r\n    this._ratingPosition = {\r\n      x: 0,\r\n      y: 0,\r\n    };\r\n    this._setRatingPosition();\r\n  }\r\n\r\n  render() {\r\n    Draw.image(this._ctx, RatingPreview.iconPositionX, RatingPreview.iconPositionY, RatingPreview.iconWidth, RatingPreview.iconHeight, this._icon);\r\n\r\n    Draw.text(this._ctx, this._ratingPosition.x, this._ratingPosition.y, this._rating, RatingPreview.ratingFontSize, Color.white.key);\r\n  }\r\n\r\n  _setRatingPosition() {\r\n    const { textWidth } = Text.calcTextMetrics(this._ctx, this._rating, RatingPreview.ratingFontSize);\r\n\r\n    this._ratingPosition.x = RatingPreview.iconPositionX - RatingPreview.ratingMarginRight - textWidth;\r\n    this._ratingPosition.y = RatingPreview.ratingPositionY + RatingPreview.ratingFontSize;\r\n  }\r\n\r\n  static iconPositionX = 651;\r\n  static iconPositionY = 23;\r\n  static iconWidth = 30;\r\n  static iconHeight = 29;\r\n\r\n  static ratingPositionY = 19;\r\n  static ratingMarginRight = 15;\r\n  static ratingFontSize = 32;\r\n}","import Text from './Text';\r\nimport Draw from './Draw';\r\nimport Color from './Color';\r\n\r\nexport default class LockedButton {\r\n  constructor({ ctx, assets, position, size, unlockRating, label }) {\r\n    this._ctx = ctx;\r\n    this._assets = assets;\r\n    this._position = position;\r\n    this._size = size;\r\n\r\n    this._label = label;\r\n    this._labelPosition = {\r\n      x: 0,\r\n      y: 0,\r\n    };\r\n    this._setLabelPosition();\r\n\r\n    this._icon = this._assets.get('star-yellow.png');\r\n    this._iconPosition = {\r\n      x: 0,\r\n      y: 0,\r\n    };\r\n    this._setIconPosition();\r\n\r\n    this._unlockRatingLabel = unlockRating;\r\n    this._unlockRatingLabelPosition = {\r\n      x: 0,\r\n      y: 0,\r\n    };\r\n    this._setUnlockRatingLabelPosition();\r\n  }\r\n\r\n  render() {\r\n    Draw.roundedRect(this._ctx, this._position.x, this._position.y, this._size.width, this._size.height, LockedButton.radius, Color.blueNight.key, LockedButton.opacity);\r\n\r\n    Draw.text(this._ctx, this._labelPosition.x, this._labelPosition.y, this._label, LockedButton.fontSize, Color.white.key, LockedButton.opacity);\r\n\r\n    Draw.image(this._ctx, this._iconPosition.x, this._iconPosition.y, LockedButton.iconWidth, LockedButton.iconHeight, this._icon, LockedButton.opacity);\r\n    \r\n    Draw.text(this._ctx, this._unlockRatingLabelPosition.x, this._unlockRatingLabelPosition.y, this._unlockRatingLabel, LockedButton.fontSize, Color.white.key, LockedButton.opacity);\r\n  }\r\n\r\n  isPressed() {\r\n    \r\n  }\r\n\r\n  _setLabelPosition() {\r\n    this._labelPosition.x = this._position.x + LockedButton.paddingHorizontal;\r\n    this._labelPosition.y = this._position.y + this._size.height / 2 + LockedButton.fontSize / 3;\r\n  }\r\n\r\n  _setIconPosition() {\r\n    const { textWidth } = Text.calcTextMetrics(this._ctx, this._label, LockedButton.fontSize);\r\n\r\n    this._iconPosition.x = this._labelPosition.x + textWidth + LockedButton.iconHorizontalMargin;\r\n    this._iconPosition.y = this._position.y + this._size.height / 2 - LockedButton.iconHeight / 2;\r\n  }\r\n\r\n  _setUnlockRatingLabelPosition() {\r\n    this._unlockRatingLabelPosition.x = this._iconPosition.x + LockedButton.iconWidth + LockedButton.iconHorizontalMargin;\r\n    this._unlockRatingLabelPosition.y = this._position.y + this._size.height / 2 + LockedButton.fontSize / 3;\r\n  }\r\n\r\n  static height = 74;\r\n  static paddingHorizontal = 40;\r\n  static fontSize = 32;\r\n  static radius = 37;\r\n  static opacity = .25;\r\n\r\n  static iconWidth = 30;\r\n  static iconHeight = 29;\r\n  static iconHorizontalMargin = 15;\r\n}","import Draw from './Draw';\r\nimport Text from './Text';\r\nimport Color from './Color';\r\nimport Button from './Button';\r\nimport RatingPreview from './RatingPreview';\r\nimport LockedButton from './LockedButton';\r\n\r\nexport default class OpenScene {\r\n  constructor({ canvas, ctx, assets, state, sceneManager }) {\r\n    this._canvas = canvas;\r\n    this._ctx = ctx;\r\n\t\tthis._assets = assets;\r\n\t\tthis._state = state;\r\n    this._sceneManager = sceneManager;\r\n\r\n    this._ratingPreview = new RatingPreview({\r\n      ctx: this._ctx,\r\n      state: this._state,\r\n      assets: this._assets,\r\n    });\r\n\r\n    this._titleMarkup = [];\r\n    this._setTitleMarkup();\r\n\r\n    this._beginnerButton = null;\r\n    this._mediumButton = null;\r\n    this._hardButton = null;\r\n    this._aboutButton = null;\r\n    this._initButtons();\r\n  }\r\n\r\n  update(time) {\r\n    \r\n  }\r\n\r\n  render() {\r\n    Draw.rect(this._ctx, 0, 0, this._canvas.width, this._canvas.height, Color.blueDeep.key);\r\n\r\n    this._ratingPreview.render();\r\n\r\n    this._titleMarkup.forEach(({ string, position }) => {\r\n      Draw.text(this._ctx, position.x, position.y, string, OpenScene.titleFontSize, Color.white.key);\r\n    })\r\n\r\n    this._beginnerButton.render();\r\n    this._mediumButton.render();\r\n    this._hardButton.render();\r\n    this._aboutButton.render();\r\n  }\r\n\r\n  handleClick({ position }) {\r\n    if (this._beginnerButton.isPressed(position)) this._sceneManager.showLevelsScene('beginner');\r\n    else if (this._mediumButton.isPressed(position)) this._sceneManager.showLevelsScene('medium');\r\n    else if (this._hardButton.isPressed(position)) this._sceneManager.showLevelsScene('hard');\r\n    else if (this._aboutButton.isPressed(position)) this._sceneManager.showAboutScene();\r\n  }\r\n\r\n  handleStartDragging() {\r\n\r\n  }\r\n\r\n  handleDragging() {\r\n\r\n  }\r\n\r\n  handleEndDragging() {\r\n\r\n  }\r\n\r\n  _setTitleMarkup() {\r\n    const title = [OpenScene.title.split('<br>')];\r\n    const titleMetrics = Text.calcMultistringTextMetrics(this._ctx, title, OpenScene.titleFontSize, OpenScene.titleLineHeight);\r\n\r\n    this._titleMarkup = titleMetrics.map(item => {\r\n      const { string, positionY, width } = item;\r\n\r\n      return {\r\n        string,\r\n        position: {\r\n          x: this._canvas.width / 2 - width / 2,\r\n          y: OpenScene.titlePositionY + positionY,\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  _initButtons() {\r\n    this._beginnerButton = new Button({\r\n      ctx: this._ctx,\r\n      position: {\r\n        x: OpenScene.beginnerButtonPositionX,\r\n        y: OpenScene.beginnerButtonPositionY,\r\n      },\r\n      size: {\r\n        width: OpenScene.beginnerButtonWidth,\r\n        height: Button.height,\r\n      },\r\n      label: OpenScene.beginnerButtonLabel,\r\n    })\r\n\r\n    const rating = this._state.getRating();\r\n    \r\n    const mediumUnlocked = rating >= OpenScene.mediumUnlockRating;\r\n    const mediumButton = mediumUnlocked ? Button : LockedButton;\r\n    this._mediumButton = new mediumButton({\r\n      ctx: this._ctx,\r\n      assets: this._assets,\r\n      position: {\r\n        x: mediumUnlocked ? OpenScene.mediumButtonPositionX : OpenScene.mediumLockedButtonPositionX,\r\n        y: OpenScene.mediumButtonPositionY,\r\n      },\r\n      size: {\r\n        width: mediumUnlocked ? OpenScene.mediumButtonWidth : OpenScene.mediumLockedButtonWidth,\r\n        height: mediumButton.height,\r\n      },\r\n      unlockRating: OpenScene.mediumUnlockRating,\r\n      label: OpenScene.mediumButtonLabel,\r\n    })\r\n\r\n    const hardUnlocked = rating >= OpenScene.hardUnlockRating;\r\n    const hardButton = hardUnlocked ? Button : LockedButton;\r\n    this._hardButton = new hardButton({\r\n      ctx: this._ctx,\r\n      assets: this._assets,\r\n      position: {\r\n        x: hardUnlocked ? OpenScene.hardButtonPositionX : OpenScene.hardLockedButtonPositionX,\r\n        y: OpenScene.hardButtonPositionY,\r\n      },\r\n      size: {\r\n        width: hardUnlocked ? OpenScene.hardButtonWidth : OpenScene.hardLockedButtonWidth,\r\n        height: hardButton.height,\r\n      },\r\n      unlockRating: OpenScene.hardUnlockRating,\r\n      label: OpenScene.hardButtonLabel,\r\n    })\r\n\r\n    this._aboutButton = new Button({\r\n      ctx: this._ctx,\r\n      position: {\r\n        x: OpenScene.aboutButtonPositionX,\r\n        y: OpenScene.aboutButtonPositionY,\r\n      },\r\n      size: {\r\n        width: OpenScene.aboutButtonWidth,\r\n        height: Button.height,\r\n      },\r\n      label: OpenScene.aboutButtonLabel,\r\n    })\r\n  }\r\n\r\n  static title = 'Rows<br>and<br>Columns';\r\n  static titleFontSize = 96;\r\n  static titleLineHeight = 100;\r\n  static titlePositionY = 240;\r\n\r\n  static beginnerButtonLabel = 'Начинающий';\r\n  static beginnerButtonWidth = 300;\r\n  static beginnerButtonPositionX = 200;\r\n  static beginnerButtonPositionY = 620;\r\n\r\n  static mediumUnlockRating = 24;\r\n  static mediumButtonLabel = 'Средний';\r\n  static mediumButtonWidth = 222;\r\n  static mediumLockedButtonWidth = 321;\r\n  static mediumButtonPositionX = 239;\r\n  static mediumButtonPositionY = 724;\r\n  static mediumLockedButtonPositionX = 190;\r\n\r\n  static hardUnlockRating = 52;\r\n  static hardButtonLabel = 'Сложный';\r\n  static hardButtonWidth = 237;\r\n  static hardLockedButtonWidth = 336;\r\n  static hardButtonPositionX = 232;\r\n  static hardButtonPositionY = 828;\r\n  static hardLockedButtonPositionX = 182;\r\n\r\n  static aboutButtonLabel = 'Об игре';\r\n  static aboutButtonWidth = 210;\r\n  static aboutButtonPositionX = 245;\r\n  static aboutButtonPositionY = 932;\r\n}","import Draw from './Draw';\r\nimport Text from './Text';\r\nimport Button from './Button';\r\nimport Color from './Color';\r\n\r\nexport default class AboutScene {\r\n  constructor({ canvas, ctx, sceneManager }) {\r\n    this._canvas = canvas;\r\n    this._ctx = ctx;\r\n    this._sceneManager = sceneManager;\r\n\r\n    this._backButton = null;\r\n    this._initButton();\r\n\r\n    this._titlePosition = {\r\n      x: 0,\r\n      y: 0,\r\n    }\r\n    this._setTitlePosition();\r\n\r\n    this._descriptionMarkup = [];\r\n    this._setDescriptionMarkup();\r\n  }\r\n\r\n  update(time) {\r\n    \r\n  }\r\n\r\n  render() {\r\n    Draw.rect(this._ctx, 0, 0, this._canvas.width, this._canvas.height, Color.blueDeep.key);\r\n\r\n    this._backButton.render();\r\n\r\n    Draw.text(this._ctx, this._titlePosition.x, this._titlePosition.y, AboutScene.title, AboutScene.titleFontSize, Color.white.key);\r\n\r\n    this._descriptionMarkup.forEach(({ string, position }) => {\r\n      Draw.text(this._ctx, position.x, position.y, string, AboutScene.descriptionFontSize, Color.white.key);\r\n    })\r\n  }\r\n\r\n  _setTitlePosition() {\r\n    const { textWidth } = Text.calcTextMetrics(this._ctx, AboutScene.title, AboutScene.titleFontSize);\r\n\r\n    this._titlePosition.x = this._canvas.width / 2 - textWidth / 2;\r\n    this._titlePosition.y = AboutScene.titlePositionY + AboutScene.titleFontSize;\r\n  }\r\n\r\n  _setDescriptionMarkup() {\r\n    const description = AboutScene.description.map(paragraph => paragraph.split('<br>'));\r\n    const descriptionMetrics = Text.calcMultistringTextMetrics(this._ctx, description, AboutScene.descriptionFontSize, AboutScene.descriptionLineHeight);\r\n\r\n    this._descriptionMarkup = descriptionMetrics.map(item => {\r\n      const { string, positionY, width } = item;\r\n\r\n      return {\r\n        string,\r\n        position: {\r\n          x: this._canvas.width / 2 - width / 2,\r\n          y: AboutScene.descriptionPositionY + positionY,\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  handleClick({ position }) {\r\n    if (this._backButton.isPressed(position)) this._sceneManager.showOpenScene();\r\n  }\r\n\r\n  handleStartDragging() {\r\n\r\n  }\r\n\r\n  handleDragging() {\r\n\r\n  }\r\n\r\n  handleEndDragging() {\r\n\r\n  }\r\n\r\n  _initButton() {\r\n    this._backButton = new Button({\r\n      ctx: this._ctx,\r\n      position: {\r\n        x: AboutScene.backButtonPositionX,\r\n        y: AboutScene.backButtonPositionY,\r\n      },\r\n      size: {\r\n        width: AboutScene.backButtonWidth,\r\n        height: Button.height,\r\n      },\r\n      label: AboutScene.backButtonLabel,\r\n    })\r\n  }\r\n\r\n  static title = 'Об игре';\r\n  static titleFontSize = 72;\r\n  static titlePositionY = 294;\r\n\r\n  static description = ['Цель игры – собирать<br>композиции из цветных плиток.<br>Перемещайте ряды влево и<br>вправо, а колонки вниз и вверх.<br>Если какая-то плитка при<br>смещении выйдет за границу<br>игрового поля, она появится<br>с противоположного края.<br>Приятной игры.', 'Связь с автором:<br>mb.games@yandex.ru'];\r\n  static descriptionFontSize = 32;\r\n  static descriptionLineHeight = 42;\r\n  static descriptionPositionY = 450;\r\n\r\n  static backButtonLabel = 'Назад';\r\n  static backButtonPositionX = 19;\r\n  static backButtonPositionY = 19;\r\n  static backButtonWidth = 181;\r\n}","import Color from './Color';\r\nimport Draw from './Draw';\r\nimport Levels from './Levels';\r\n\r\nexport default class LevelButton {\r\n  constructor({ ctx, assets, position, level, prevScore, prevMoves }) {\r\n    this._ctx = ctx;\r\n    this._assets = assets;\r\n    this._position = position;\r\n    this._level = level;\r\n\r\n    this._levelLabel = this._level.getIndex() + 1;\r\n    this._levelLabelPosition = {\r\n      x: 0,\r\n      y: 0,\r\n    };\r\n    this._setLevelLabelPosition();\r\n\r\n    this._prevMoves = prevMoves;\r\n    this._prevMovesPosition = {\r\n      x: 0,\r\n      y: 0,\r\n    };\r\n    this._setPrevMovesPosition();\r\n\r\n    this._prevScore = prevScore;\r\n    this._prevScoreMarkup = [];\r\n    this._setPrevScoreMarkup();\r\n\r\n    this._color = this._prevScore ? Color.green : Color.blueNight;\r\n  }\r\n\r\n  render() {\r\n    Draw.roundedRect(this._ctx, this._position.x, this._position.y, LevelButton.width, LevelButton.height, LevelButton.radius, this._color.key);\r\n    \r\n    Draw.text(this._ctx, this._levelLabelPosition.x, this._levelLabelPosition.y, this._levelLabel, LevelButton.levelLabelFontSize, Color.white.key);\r\n\r\n    if (this._prevMoves !== 0) {\r\n      Draw.text(this._ctx, this._prevMovesPosition.x, this._prevMovesPosition.y, this._prevMoves, LevelButton.prevMovesFontSize, Color.white.key);\r\n    }\r\n\r\n    if (this._prevScore !== 0) {\r\n      this._prevScoreMarkup.forEach(({ icon, position }) => {\r\n        Draw.image(this._ctx, position.x, position.y, LevelButton.iconWidth, LevelButton.iconHeight, icon);\r\n      })\r\n    } \r\n  }\r\n\r\n  isPressed(clickPosition) {\r\n    return (\r\n      clickPosition.x > this._position.x && clickPosition.x < this._position.x + LevelButton.width &&\r\n      clickPosition.y > this._position.y && clickPosition.y < this._position.y + LevelButton.height\r\n    );\r\n  }\r\n\r\n  _setPrevScoreMarkup() {\r\n    const prevScoreMarkup = [];\r\n\r\n    for (let i = 0; i < Levels.maxScore; i++) {\r\n      prevScoreMarkup.push({\r\n        icon: i < this._prevScore ? this._assets.get('star-yellow.png') : this._assets.get('star-green.png'),\r\n        position: {\r\n          x: this._position.x + LevelButton.padding + i * (LevelButton.iconWidth + LevelButton.iconGap),\r\n          y: this._position.y + LevelButton.height - LevelButton.padding - LevelButton.iconHeight,\r\n        },\r\n      });\r\n    }\r\n\r\n    this._prevScoreMarkup = prevScoreMarkup;\r\n  }\r\n\r\n  _setPrevMovesPosition() {\r\n    this._prevMovesPosition.x = this._position.x + LevelButton.padding;\r\n    this._prevMovesPosition.y = this._position.y + LevelButton.height - LevelButton.padding - LevelButton.iconHeight - LevelButton.prevMovesMarginBottom - LevelButton.prevMovesLineHeight + LevelButton.prevMovesFontSize;\r\n  }\r\n\r\n  _setLevelLabelPosition() {\r\n    this._levelLabelPosition.x = this._position.x + LevelButton.padding;\r\n    this._levelLabelPosition.y = this._position.y + LevelButton.padding + LevelButton.levelLabelFontSize - LevelButton.levelLabelLineHeight / 4;\r\n  }\r\n\r\n  getLevel() {\r\n    return this._level;\r\n  }\r\n\r\n  static width = 180;\r\n  static height = 180;\r\n  static radius = 46;\r\n  static padding = 24;\r\n\r\n  static levelLabelFontSize = 48;\r\n  static levelLabelLineHeight = 52;\r\n\r\n  static prevMovesFontSize = 32;\r\n  static prevMovesLineHeight = 36;\r\n  static prevMovesMarginBottom = 4;\r\n\r\n  static iconWidth = 30;\r\n  static iconHeight = 29;\r\n  static iconGap = 6;\r\n}","import Draw from './Draw';\r\nimport Color from './Color';\r\n\r\nexport default class Tile {\r\n  constructor({ ctx, color, size, position }) {\r\n    this._ctx = ctx;\r\n    this._color = color;\r\n    this._size = size;\r\n    this._position = position;\r\n    this._opacity = 1;\r\n    this._scaleFactor = 1;\r\n  }\r\n\r\n  render() {\r\n    const width = this._size.width * this._scaleFactor;\r\n    const height = this._size.height * this._scaleFactor;\r\n    const positionX = this._position.x - (width - this._size.width) / 2;\r\n    const positionY = this._position.y - (height - this._size.height) / 2;\r\n    const radius = Tile.radius * this._scaleFactor;\r\n    \r\n    Draw.roundedRect(this._ctx, positionX, positionY, width, height, radius, this._color.key, this._opacity);\r\n  }\r\n\r\n  getScaleFactor() {\r\n    return this._scaleFactor;\r\n  }\r\n\r\n  setScaleFactor(scaleFactor) {\r\n    this._scaleFactor = scaleFactor;\r\n  }\r\n\r\n  getPosition() {\r\n    return this._position;\r\n  }\r\n\r\n  setPosition(position) {\r\n    this._position = position;\r\n  }\r\n\r\n  getColor() {\r\n    return this._color;\r\n  }\r\n\r\n  getOpacity() {\r\n    return this._opacity;\r\n  }\r\n\r\n  setOpacity(opacity) {\r\n    this._opacity = opacity;\r\n  }\r\n\r\n  static radius = 30;\r\n  static colors = [\r\n    Color.blueNight,\r\n    Color.blue,\r\n    Color.green,\r\n    Color.sea,\r\n    Color.red,\r\n    Color.purple,\r\n    Color.orange,\r\n    Color.yellow,\r\n  ];\r\n}","import Tile from './Tile';\r\n\r\nexport default class Level {\r\n  constructor({ key, index, id, targetMap, initialMap, moves }) {\r\n    this._key = key;\r\n    this._index = index;\r\n    this._id = id;\r\n    this._targetMap = targetMap;\r\n    this._initialMap = initialMap;\r\n    this._moves = moves;\r\n  }\r\n\r\n  match(currentFieldMap) {\r\n    return currentFieldMap.every((row, y) => {\r\n      return row.every((cell, x) => cell.getTile().getColor().id === this._targetMap[y][x]);\r\n    })\r\n  }\r\n\r\n  getKey() {\r\n    return this._key;\r\n  }\r\n\r\n  getIndex() {\r\n    return this._index;\r\n  }\r\n\r\n  getId() {\r\n    return this._id;\r\n  }\r\n\r\n  getTargetMap() {\r\n    return this._targetMap;\r\n  }\r\n\r\n  getMapLengths() {\r\n    return {\r\n      x: this._targetMap[0].length,\r\n      y: this._targetMap.length,\r\n    }\r\n  }\r\n\r\n  getColors() {\r\n    return this._initialMap\r\n      .flat()\r\n      .map(id => Tile.colors.find(color => color.id === id));\r\n  }\r\n}","import Draw from './Draw';\r\nimport Text from './Text';\r\nimport Button from './Button';\r\nimport Color from './Color';\r\nimport LevelButton from './LevelButton';\r\nimport Level from './Level';\r\n\r\nexport default class LevelsScene {\r\n  constructor({ canvas, ctx, assets, state, sceneManager, levels, levelsKey }) {\r\n    this._canvas = canvas;\r\n    this._ctx = ctx;\r\n    this._assets = assets;\r\n    this._state = state;\r\n    this._sceneManager = sceneManager;\r\n    this._levels = levels;\r\n    this._levelsKey = levelsKey;\r\n\r\n    this._backButton = null;\r\n    this._initButton();\r\n\r\n    this._titleMarkup = [];\r\n    this._setTitleMarkup();\r\n\r\n    this._levelsButtons = [];\r\n    this._setLevelsButtons();\r\n  }\r\n\r\n  update(time) {\r\n\r\n  }\r\n\r\n  render() {\r\n    Draw.rect(this._ctx, 0, 0, this._canvas.width, this._canvas.height, Color.blueDeep.key);\r\n\r\n    this._backButton.render();\r\n\r\n    this._titleMarkup.forEach(({ string, position }) => {\r\n      Draw.text(this._ctx, position.x, position.y, string, LevelsScene.titleFontSize, Color.white.key);\r\n    })\r\n\r\n    this._levelsButtons.forEach(button => {\r\n      button.render();\r\n    })\r\n  }\r\n\r\n  handleClick({ position }) {\r\n    if (this._backButton.isPressed(position)) this._sceneManager.showOpenScene();\r\n\r\n    this._levelsButtons.forEach(levelButton => {\r\n      const isPressed = levelButton.isPressed(position);\r\n      if (isPressed) {\r\n        const level = levelButton.getLevel();\r\n        this._sceneManager.showCoreScene(level);\r\n        return;\r\n      }\r\n    })\r\n  }\r\n\r\n  handleStartDragging() {\r\n\r\n  }\r\n\r\n  handleDragging() {\r\n\r\n  }\r\n\r\n  handleEndDragging() {\r\n\r\n  }\r\n\r\n  _setTitleMarkup() {\r\n    const title = [LevelsScene.title.split('<br>')];\r\n    const titleMetrics = Text.calcMultistringTextMetrics(this._ctx, title, LevelsScene.titleFontSize, LevelsScene.titleLineHeight);\r\n\r\n    this._titleMarkup = titleMetrics.map(item => {\r\n      const { string, positionY, width } = item;\r\n\r\n      return {\r\n        string,\r\n        position: {\r\n          x: this._canvas.width / 2 - width / 2,\r\n          y: LevelsScene.titlePositionY + positionY,\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  _setLevelsButtons() {\r\n    const levels = this._levels.getLevelsByKey(this._levelsKey);\r\n\r\n    levels.forEach(({ id, targetMap, initialMap, moves }, index) => {\r\n      const col = index % 3;\r\n      const row = Math.floor(index / 3);\r\n\r\n      const levelButton = new LevelButton({\r\n        ctx: this._ctx,\r\n        assets: this._assets,\r\n        position: {\r\n          x: LevelsScene.gridPositionX + col * (LevelButton.width + LevelsScene.gridGap),\r\n          y: LevelsScene.gridPositionY + row * (LevelButton.height + LevelsScene.gridGap),\r\n        },\r\n        level: new Level({ key: this._levelsKey, index, id, targetMap, initialMap, moves }),\r\n        prevScore: this._state.getLevelPrevScore(id) || 0,\r\n        prevMoves: this._state.getLevelPrevMoves(id) || 0,\r\n      })\r\n\r\n      this._levelsButtons.push(levelButton);\r\n    })\r\n  }\r\n\r\n  _initButton() {\r\n    this._backButton = new Button({\r\n      ctx: this._ctx,\r\n      position: {\r\n        x: LevelsScene.backButtonPositionX,\r\n        y: LevelsScene.backButtonPositionY,\r\n      },\r\n      size: {\r\n        width: LevelsScene.backButtonWidth,\r\n        height: Button.height,\r\n      },\r\n      label: LevelsScene.backButtonLabel,\r\n    })\r\n  }\r\n\r\n  static title = 'Выберите<br>уровень';\r\n  static titlePositionY = 153;\r\n  static titleFontSize = 72;\r\n  static titleLineHeight = 76;\r\n\r\n  static gridWidth = 600;\r\n  static gridGap = 30;\r\n  static gridPositionX = 50;\r\n  static gridPositionY = 385;\r\n\r\n  static backButtonLabel = 'Назад';\r\n  static backButtonPositionY = 19;\r\n  static backButtonPositionX = 19;\r\n  static backButtonWidth = 181;\r\n}","import Draw from './Draw';\r\nimport Tile from './Tile';\r\n\r\nexport default class LevelPreview {\r\n  constructor({ ctx, map }) {\r\n    this._ctx = ctx;\r\n    this._map = map;\r\n\r\n    this._columnWidth = 0;\r\n    this._rowHeight = 0;\r\n    this._setMetrics();\r\n  }\r\n\r\n  render() {\r\n    this._map.forEach((row, y) => {\r\n      row.forEach((colorId, x) => {\r\n        const tilePositionX = LevelPreview.positionX + (this._columnWidth + LevelPreview.gap) * x;\r\n        const tilePositionY = LevelPreview.positionY + (this._rowHeight + LevelPreview.gap) * y;\r\n\r\n        const tileColor = Tile.colors.find(color => color.id === colorId);\r\n\r\n        Draw.roundedRect(this._ctx, tilePositionX, tilePositionY, this._columnWidth, this._rowHeight, LevelPreview.tileRadius, tileColor.key);\r\n      });\r\n    });\r\n  }\r\n\r\n  _setMetrics() {\r\n    const xLength = this._map[0].length;\r\n    const yLength = this._map.length;\r\n\r\n    this._columnWidth = (LevelPreview.width - LevelPreview.gap * (xLength - 1)) / xLength;\r\n    this._rowHeight = (LevelPreview.height - LevelPreview.gap * (yLength - 1)) / yLength;\r\n  }\r\n\r\n  static width = 194;\r\n  static height = 194;\r\n  static positionX = 487;\r\n  static positionY = 19;\r\n  static gap = 2;\r\n  static tileRadius = 10;\r\n}","export default class Cell {\r\n  constructor({ coords }) {\r\n    this._coords = coords;\r\n    this._tile = null;\r\n    this._detachedTile = null;\r\n  }\r\n\r\n  render() {\r\n    if (this._tile) this._tile.render();\r\n  }\r\n\r\n  setTile(tile) {\r\n    this._tile = tile;\r\n    const detachedTile = this._detachedTile;\r\n    this._detachedTile = null;\r\n    return this._tile !== detachedTile;\r\n  }\r\n\r\n  getTile() {\r\n    return this._tile;\r\n  }\r\n\r\n  detachTile() {\r\n    const tile = this._tile;\r\n    this._detachedTile = tile;\r\n    this._tile = null;\r\n    return tile;\r\n  }\r\n\r\n  getCoords() {\r\n    return this._coords;\r\n  }\r\n}","export default class TileScaleAnimation {\r\n  constructor({ tile, delay = 0 }) {\r\n    this._tile = tile;\r\n    this._delay = delay;\r\n    this._startTime = null;\r\n    this._finished = false;\r\n  }\r\n\r\n  update({ timestamp }) {\r\n    if (this._finished) return;\r\n    else if (this._startTime === null) this._startTime = timestamp + this._delay;\r\n    \r\n    const progressTime = timestamp - this._startTime;\r\n    if (progressTime < 0) return;\r\n\r\n    let scaleFactor = 1;\r\n\r\n    if (progressTime < TileScaleAnimation.duration) {\r\n      const progressDelta = progressTime / TileScaleAnimation.duration;\r\n      scaleFactor = Math.pow(1 - progressDelta, 2) * TileScaleAnimation.path[0] + 2 * (1 - progressDelta) * progressDelta * TileScaleAnimation.path[1] + Math.pow(progressDelta, 2) * TileScaleAnimation.path[2];\r\n    } else {\r\n      this._finished = true;\r\n    }\r\n\r\n    this._tile.setScaleFactor(scaleFactor);\r\n  }\r\n\r\n  isFinished() {\r\n    return this._finished;\r\n  }\r\n\r\n  static duration = 1000; \r\n  static path = [1, 0.6, 1];\r\n}","import Tile from './Tile';\r\nimport Cell from './Cell';\r\nimport TileScaleAnimation from './TileScaleAnimation';\r\n\r\nexport default class Field {\r\n  constructor({ ctx, assets, state, levels, sceneManager, level }) {\r\n    this._ctx = ctx;\r\n    this._assets = assets;\r\n    this._state = state;\r\n    this._levels = levels;\r\n    this._sceneManager = sceneManager;\r\n    this._level = level;\r\n\r\n    this._columnWidth = 0;\r\n    this._rowHeight = 0;\r\n    this._maxOutOfBoundsX = 0;\r\n    this._maxOutOfBoundsY = 0;\r\n    this._setMetrics();\r\n\r\n    this._map = [];\r\n    this._setMap();\r\n    this._setTiles();\r\n\r\n    this._animations = [];\r\n\r\n    this._startDraggingPosition = null;\r\n    this._startDraggingCoords = null;\r\n    this._prevDraggingPosition = null;\r\n    this._draggingAxis = null;\r\n    this._detachedTiles = [];\r\n    this._levelComplete = false;\r\n\r\n    this._moves = 0;\r\n  }\r\n\r\n  update(time) {\r\n    this._animations.forEach(animation => animation.update(time));\r\n\r\n    this._animations = this._animations.filter(animation => !animation.isFinished());\r\n  }\r\n\r\n  render() {\r\n    this._map.forEach(row => {\r\n      row.forEach(cell => cell.render());\r\n    });\r\n\r\n    this._detachedTiles.forEach(tile => tile.render());\r\n  }\r\n\r\n  handleStartDragging({ position }) {\r\n    if (this._levelComplete || !this._isFieldIncludesPosition(position)) return;\r\n\r\n    this._startDraggingPosition = position;\r\n    this._startDraggingCoords = this.getCoordsByPosition(position);\r\n\r\n    this._prevDraggingPosition = position;\r\n  }\r\n\r\n  handleDragging({ position }) {\r\n    if (!this._startDraggingPosition || !this._startDraggingCoords) return;\r\n\r\n    if (!this._draggingAxis) this._setDraggingAxis(position);\r\n\r\n    if (!this._detachedTiles.length) this._detachTiles();\r\n\r\n    if (this._draggingAxis === 'x') this._moveRow(position);\r\n    else this._moveColumn(position);\r\n\r\n    this._prevDraggingPosition = position;\r\n  }\r\n\r\n  _setDraggingAxis(draggingPosition) {\r\n    const xOffset = this._startDraggingPosition.x - draggingPosition.x;\r\n    const yOffset = this._startDraggingPosition.y - draggingPosition.y;\r\n\r\n    this._draggingAxis = Math.abs(xOffset) > Math.abs(yOffset) ? 'x' : 'y';\r\n  }\r\n\r\n  handleEndDragging(event) {\r\n    if (!this._detachedTiles.length) return;\r\n\r\n    const axis = this._draggingAxis;\r\n    this._detachedTiles.sort((a, b) => a.getPosition()[axis] - b.getPosition()[axis]);\r\n\r\n    let tilesWasUpdated = false;\r\n\r\n    if (axis === 'x') {\r\n      this._map[this._startDraggingCoords.y].forEach(cell => {\r\n        const tileWasUpdated = this._attachFirstDetachedTileToCell(cell);\r\n        tilesWasUpdated = tilesWasUpdated || tileWasUpdated;\r\n      });\r\n    } else {\r\n      this._map.forEach(row => {\r\n        const cell = row[this._startDraggingCoords.x];\r\n        const tileWasUpdated = this._attachFirstDetachedTileToCell(cell);\r\n        tilesWasUpdated = tilesWasUpdated || tileWasUpdated;\r\n      });\r\n    }\r\n\r\n    if (tilesWasUpdated) this._moves += 1;\r\n\r\n    this._startDraggingPosition = null;\r\n    this._startDraggingCoords = null;\r\n    this._prevDraggingPosition = null;\r\n    this._draggingAxis = null;\r\n\r\n    this._handleDraggingResult();\r\n  }\r\n\r\n  _attachFirstDetachedTileToCell(cell) {\r\n    const coords = cell.getCoords();\r\n    const tile = this._detachedTiles.shift();\r\n\r\n    const position = this.getPositionByCoords(coords);\r\n    tile.setPosition(position);\r\n    tile.setOpacity(1);\r\n\r\n    return cell.setTile(tile);\r\n  }\r\n\r\n  async _handleDraggingResult() {\r\n    this._levelComplete = this._level.match(this._map);\r\n    if (!this._levelComplete) return;\r\n\r\n    this._startLevelCompliteAnimation();\r\n\r\n    const score = this._levels.getLevelScore(this._moves, this._level.getId());\r\n    await this._state.setLevelResult(this._level.getId(), this._moves, score);\r\n\r\n    setTimeout(() => {\r\n      this._sceneManager.showResultScene(this._moves, score, this._level);\r\n    }, 1500)\r\n  }\r\n\r\n  _startLevelCompliteAnimation() {\r\n    this._map.forEach(row => {\r\n      row.forEach(cell => {\r\n        const tile = cell.getTile();\r\n        const animation = new TileScaleAnimation({ tile });\r\n        this._animations.push(animation);\r\n      })\r\n    })\r\n  }\r\n\r\n  _detachTiles() {\r\n    this._detachedTiles = this._draggingAxis === 'x' ?\r\n      this._map[this._startDraggingCoords.y].map(cell => cell.detachTile()) :\r\n      this._map.map(row => row[this._startDraggingCoords.x].detachTile());\r\n  }\r\n\r\n  _moveRow(position) {\r\n    const offset = position.x - this._prevDraggingPosition.x;\r\n\r\n    this._detachedTiles.forEach(tile => {\r\n      const currentPosition = tile.getPosition();\r\n\r\n      const newPosition = {\r\n        x: currentPosition.x + offset,\r\n        y: currentPosition.y,\r\n      }\r\n\r\n      if (offset < 0 && newPosition.x < Field.positionX - this._maxOutOfBoundsX) {\r\n        newPosition.x += this._detachedTiles.length * (this._columnWidth + Field.gap);\r\n      } else if (offset > 0 && newPosition.x + this._columnWidth > Field.positionX + Field.width + this._maxOutOfBoundsX) {\r\n        newPosition.x -= this._detachedTiles.length * (this._columnWidth + Field.gap);\r\n      }\r\n\r\n      let opacity = 1;\r\n\r\n      if (newPosition.x < Field.positionX) {\r\n        opacity = 1 - (Field.positionX - newPosition.x) / this._maxOutOfBoundsX;\r\n      } else if (newPosition.x + this._columnWidth > Field.positionX + Field.width) {\r\n        opacity = 1 - (newPosition.x + this._columnWidth - (Field.positionX + Field.width)) / this._maxOutOfBoundsX;\r\n      }\r\n\r\n      tile.setOpacity(opacity);\r\n      tile.setPosition(newPosition);\r\n    })\r\n  }\r\n\r\n  _moveColumn(position) {\r\n    const offset = position.y - this._prevDraggingPosition.y;\r\n\r\n    this._detachedTiles.forEach(tile => {\r\n      const currentPosition = tile.getPosition();\r\n\r\n      const newPosition = {\r\n        x: currentPosition.x,\r\n        y: currentPosition.y + offset,\r\n      }\r\n\r\n      if (offset < 0 && newPosition.y < Field.positionY - this._maxOutOfBoundsY) {\r\n        newPosition.y += this._detachedTiles.length * (this._rowHeight + Field.gap);\r\n      } else if (offset > 0 && newPosition.y + this._rowHeight > Field.positionY + Field.height + this._maxOutOfBoundsY) {\r\n        newPosition.y -= this._detachedTiles.length * (this._rowHeight + Field.gap);\r\n      }\r\n\r\n      let opacity = 1;\r\n\r\n      if (newPosition.y < Field.positionY) {\r\n        opacity = 1 - (Field.positionY - newPosition.y) / this._maxOutOfBoundsY;\r\n      } else if (newPosition.y + this._rowHeight > Field.positionY + Field.height) {\r\n        opacity = 1 - (newPosition.y + this._rowHeight - (Field.positionY + Field.height)) / this._maxOutOfBoundsY;\r\n      }\r\n\r\n      tile.setOpacity(opacity);\r\n      tile.setPosition(newPosition);\r\n    })\r\n  }\r\n\r\n  getCoordsByPosition(position) {\r\n    return {\r\n      x: Math.floor((position.x - Field.positionX) / (Field.gap + this._columnWidth)),\r\n      y: Math.floor((position.y - Field.positionY) / (Field.gap + this._rowHeight)),\r\n    }\r\n  }\r\n\r\n  getPositionByCoords(coords) {\r\n    return {\r\n      x: Field.positionX + coords.x * (Field.gap + this._columnWidth),\r\n      y: Field.positionY + coords.y * (Field.gap + this._rowHeight),\r\n    }\r\n  }\r\n\r\n  _getCellByCoords(coords) {\r\n    return this._map[coords.y][coords.x]\r\n  }\r\n\r\n  _isFieldIncludesPosition(position) {\r\n    return (\r\n      position.x > Field.positionX && position.x < Field.positionX + Field.width &&\r\n      position.y > Field.positionY && position.y < Field.positionY + Field.height\r\n    );\r\n  }\r\n\r\n  _setMetrics() {\r\n    const { x: xLength, y: yLength } = this._level.getMapLengths();\r\n\r\n    this._columnWidth = (Field.width - Field.gap * (xLength - 1)) / xLength;\r\n    this._rowHeight = (Field.height - Field.gap * (yLength - 1)) / yLength;\r\n\r\n    this._maxOutOfBoundsX = (Field.gap + this._columnWidth) / 2;\r\n    this._maxOutOfBoundsY = (Field.gap + this._rowHeight) / 2;\r\n  }\r\n\r\n  _setMap() {\r\n    const { x: xLength, y: yLength } = this._level.getMapLengths();\r\n\r\n    for (let y = 0; y < yLength; y++) {\r\n\r\n      const row = [];\r\n      for (let x = 0; x < xLength; x++) {\r\n        const cell = new Cell({ coords: { x, y }});\r\n        row.push(cell);\r\n      }\r\n\r\n      this._map.push(row);\r\n    }\r\n  }\r\n\r\n  _setTiles() {\r\n    const colors = this._level.getColors();\r\n\r\n    this._map.forEach(row => {\r\n      row.forEach(cell => {\r\n        const coords = cell.getCoords();\r\n        const color = colors.shift();\r\n\r\n        const tile = this._createTile(coords, color);\r\n        cell.setTile(tile);\r\n      })\r\n    })\r\n  }\r\n\r\n  _createTile(coords, color) {\r\n    const position = this.getPositionByCoords(coords);\r\n    const size = {\r\n      width: this._columnWidth,\r\n      height: this._rowHeight,\r\n    }\r\n    return new Tile({ ctx: this._ctx, color, size, position });\r\n  }\r\n  \r\n  static width = 662;\r\n  static height = 662;\r\n  static positionX = 19;\r\n  static positionY = 292;\r\n  static gap = 10;\r\n}","import LevelPreview from './LevelPreview';\r\nimport Field from './Field';\r\nimport Draw from './Draw';\r\nimport Color from './Color';\r\nimport Button from './Button';\r\n\r\nexport default class CoreScene {\r\n\tconstructor({ canvas, ctx, assets, state, levels, sceneManager, level }) {\r\n\t\tthis._canvas = canvas;\r\n\t\tthis._ctx = ctx;\r\n\t\tthis._assets = assets;\r\n\t\tthis._state = state;\r\n\t\tthis._levels = levels;\r\n\t\tthis._sceneManager = sceneManager;\r\n\r\n    this._backButton = null;\r\n    this._initButton();\r\n\r\n    this._level = level;\r\n\r\n    this._levelPreview = new LevelPreview({\r\n\t\t\tctx: this._ctx,\r\n      map: this._level.getTargetMap(),\r\n    });\r\n\r\n\t\tthis._field = new Field({\r\n\t\t\tctx: this._ctx,\r\n\t\t\tassets: this._assets,\r\n\t\t\tstate: this._state,\r\n\t\t\tlevels: this._levels,\r\n\t\t\tsceneManager: this._sceneManager,\r\n\t\t\tlevel: this._level,\r\n\t\t});\r\n\t}\r\n\r\n\tupdate(time) {\r\n\t\tthis._field.update(time);\r\n\t}\r\n\r\n\trender() {\r\n    Draw.rect(this._ctx, 0, 0, this._canvas.width, this._canvas.height, Color.blueDeep.key);\r\n\r\n\t\tthis._backButton.render();\r\n    this._levelPreview.render();\r\n\t\tthis._field.render();\r\n\t}\r\n\r\n\thandleClick({ position }) {\r\n\t\tif (this._backButton.isPressed(position)) this._sceneManager.showLevelsScene(this._level.getKey());\r\n\t}\r\n\r\n\thandleStartDragging(event) {\r\n\t\tthis._field.handleStartDragging(event);\r\n\t}\r\n\r\n\thandleDragging(event) {\r\n\t\tthis._field.handleDragging(event);\r\n\t}\r\n\r\n\thandleEndDragging(event) {\r\n\t\tthis._field.handleEndDragging(event);\r\n\t}\r\n\r\n  _initButton() {\r\n    this._backButton = new Button({\r\n      ctx: this._ctx,\r\n      position: {\r\n        x: CoreScene.backButtonPositionX,\r\n        y: CoreScene.backButtonPositionY,\r\n      },\r\n      size: {\r\n        width: CoreScene.backButtonWidth,\r\n        height: Button.height,\r\n      },\r\n      label: CoreScene.backButtonLabel,\r\n    })\r\n  }\r\n\r\n\tstatic backButtonLabel = 'Назад';\r\n\tstatic backButtonWidth = 181;\r\n\tstatic backButtonPositionX = 19;\r\n\tstatic backButtonPositionY = 19;\r\n}","import Draw from './Draw';\r\nimport Text from './Text';\r\nimport Button from './Button';\r\nimport Color from './Color';\r\nimport RatingPreview from './RatingPreview';\r\nimport Level from './Level';\r\nimport Levels from './Levels';\r\n\r\nexport default class ResultScene {\r\n  constructor({ canvas, ctx, assets, state, levels, sceneManager, moves, score, level }) {\r\n    this._canvas = canvas;\r\n    this._ctx = ctx;\r\n\t\tthis._assets = assets;\r\n\t\tthis._state = state;\r\n    this._levels = levels;\r\n    this._sceneManager = sceneManager;\r\n    this._moves = moves;\r\n    this._score = score;\r\n    this._level = level;\r\n\r\n    this._ratingPreview = new RatingPreview({\r\n      ctx: this._ctx,\r\n      state: this._state,\r\n      assets: this._assets,\r\n    });\r\n\r\n    this._titleMarkup = [];\r\n    this._setTitleMarkup();\r\n\r\n    this._movesHintPosition = {\r\n      x: 0,\r\n      y: 0\r\n    };\r\n    this._setMovesHintPosition();\r\n\r\n    this._movesPosition = {\r\n      x: 0,\r\n      y: 0,\r\n    };\r\n    this._setMovesPosition();\r\n\r\n    this._scoreMarkup = [];\r\n    this._setLevelScoreMarkup();\r\n\r\n    this._continueButton = null;\r\n    this._repeatButton = null;\r\n    this._initButtons();\r\n\r\n  }\r\n\r\n  update(time) {\r\n    \r\n  }\r\n\r\n  render() {\r\n    Draw.rect(this._ctx, 0, 0, this._canvas.width, this._canvas.height, Color.blueDeep.key);\r\n\r\n    this._ratingPreview.render();\r\n\r\n    this._titleMarkup.forEach(({ string, position }) => {\r\n      Draw.text(this._ctx, position.x, position.y, string, ResultScene.titleFontSize, Color.white.key);\r\n    })\r\n\r\n    Draw.text(this._ctx, this._movesHintPosition.x, this._movesHintPosition.y, ResultScene.movesHintLabel, ResultScene.movesHintFontSize, Color.yellow.key);\r\n\r\n    Draw.text(this._ctx, this._movesPosition.x, this._movesPosition.y, this._moves, ResultScene.movesFontSize, Color.yellow.key);\r\n\r\n    this._scoreMarkup.forEach(({ icon, position }) => {\r\n      Draw.image(this._ctx, position.x, position.y, ResultScene.iconWidth, ResultScene.iconHeight, icon);\r\n    })\r\n\r\n    this._continueButton.render();\r\n    this._repeatButton.render();\r\n  }\r\n\r\n  _showNextLevelOrLevelsMenu() {\r\n    const key = this._level.getKey();\r\n    const index = this._level.getIndex() + 1;\r\n    const nextLevel = this._levels.getLevelByKeyAndIndex(key, index);\r\n\r\n    if (nextLevel) {\r\n      const { id, targetMap, initialMap, moves } = nextLevel;\r\n      this._sceneManager.showCoreScene(new Level({ key, index, id, targetMap, initialMap, moves }));\r\n    }\r\n    else this._sceneManager.showLevelsScene(key);\r\n  }\r\n\r\n  handleClick({ position }) {\r\n    if (this._continueButton.isPressed(position)) this._showNextLevelOrLevelsMenu();\r\n    else if (this._repeatButton.isPressed(position)) this._sceneManager.showCoreScene(this._level);\r\n  }\r\n\r\n  handleStartDragging() {\r\n\r\n  }\r\n\r\n  handleDragging() {\r\n\r\n  }\r\n\r\n  handleEndDragging() {\r\n\r\n  }\r\n\r\n  _setMovesHintPosition() {\r\n    this._movesHintPosition.x = ResultScene.movesHintPositionX;\r\n    this._movesHintPosition.y = ResultScene.movesHintPositionY + ResultScene.movesHintFontSize;\r\n  }\r\n\r\n  _setMovesPosition() {\r\n    const { textWidth } = Text.calcTextMetrics(this._ctx, this._moves, ResultScene.movesFontSize);\r\n    this._movesPosition.x = this._canvas.width / 2 - textWidth / 2;\r\n    this._movesPosition.y = ResultScene.movesPositionY + ResultScene.movesFontSize;\r\n  }\r\n\r\n  _setTitleMarkup() {\r\n    const title = [ResultScene.title.split('<br>')];\r\n    const titleMetrics = Text.calcMultistringTextMetrics(this._ctx, title, ResultScene.titleFontSize, ResultScene.titleLineHeight);\r\n\r\n    this._titleMarkup = titleMetrics.map(item => {\r\n      const { string, positionY, width } = item;\r\n\r\n      return {\r\n        string,\r\n        position: {\r\n          x: this._canvas.width / 2 - width / 2,\r\n          y: ResultScene.titlePositionY + positionY,\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  _setLevelScoreMarkup() {\r\n    const scoreMarkup = [];\r\n\r\n    for (let i = 0; i < Levels.maxScore; i++) {\r\n      scoreMarkup.push({\r\n        icon: i < this._score ? this._assets.get('star-yellow.png') : this._assets.get('star-blue.png'),\r\n        position: {\r\n          x: ResultScene.ratingPositionX + i * (ResultScene.iconWidth + ResultScene.iconGap),\r\n          y: ResultScene.ratingPositionY,\r\n        },\r\n      });\r\n    }\r\n\r\n    this._scoreMarkup = scoreMarkup;\r\n  }\r\n\r\n  _initButtons() {\r\n    this._continueButton = new Button({\r\n      ctx: this._ctx,\r\n      position: {\r\n        x: ResultScene.continueButtonPositionX,\r\n        y: ResultScene.continueButtonPositionY,\r\n      },\r\n      size: {\r\n        width: ResultScene.continueButtonWidth,\r\n        height: ResultScene.buttonsHeight,\r\n      },\r\n      label: ResultScene.continueButtonLabel,\r\n    })\r\n    \r\n    this._repeatButton = new Button({\r\n      ctx: this._ctx,\r\n      position: {\r\n        x: ResultScene.repeatButtonPositionX,\r\n        y: ResultScene.repeatButtonPositionY,\r\n      },\r\n      size: {\r\n        width: ResultScene.repeatButtonWidth,\r\n        height: ResultScene.buttonsHeight,\r\n      },\r\n      label: ResultScene.repeatButtonLabel,\r\n    })\r\n  }\r\n\r\n  static title = 'Уровень<br>пройден!';\r\n  static titleFontSize = 72;\r\n  static titleLineHeight = 76;\r\n  static titlePositionY = 251;\r\n\r\n  static movesHintLabel = 'Ходов:';\r\n  static movesHintFontSize = 48;\r\n  static movesHintPositionX = 267;\r\n  static movesHintPositionY = 483;\r\n\r\n  static movesFontSize = 96;\r\n  static movesPositionY = 541;\r\n\r\n  static ratingPositionX = 221;\r\n  static ratingPositionY = 667;\r\n\r\n  static iconWidth = 73;\r\n  static iconHeight = 70;\r\n  static iconGap = 20;\r\n\r\n  static continueButtonLabel = 'Продолжить';\r\n  static continueButtonPositionX = 206;\r\n  static continueButtonPositionY = 817;\r\n  static continueButtonWidth = 289;\r\n\r\n  static repeatButtonLabel = 'Повторить уровень';\r\n  static repeatButtonPositionX = 151;\r\n  static repeatButtonPositionY = 921;\r\n  static repeatButtonWidth = 399;\r\n\r\n  static buttonsHeight = 74;\r\n}","import Draw from './Draw';\r\nimport Color from './Color';\r\nimport OpenScene from './OpenScene';\r\nimport AboutScene from './AboutScene';\r\nimport LevelsScene from './LevelsScene';\r\nimport CoreScene from './CoreScene';\r\nimport ResultScene from './ResultScene';\r\n\r\nexport default class SceneManager {\r\n\tconstructor({ canvas, ctx, assets, state, levels }) {\r\n\t\tthis._canvas = canvas;\r\n\t\tthis._ctx = ctx;\r\n\t\tthis._assets = assets;\r\n\t\tthis._state = state;\r\n\t\tthis._levels = levels;\r\n\r\n\t\tthis._currentScene = null;\r\n\t\tthis._futureScene = null;\r\n\r\n\t\tthis._transitionOverlayOffsetX = 1;\r\n\t}\r\n\r\n\tupdate(time) {\r\n\t\tif (this._currentScene) this._currentScene.update(time);\r\n\r\n\t\tif (this._futureScene) this._updateSceneOut(time);\r\n\t\telse if (this._transitionOverlayOffsetX <= 0) this._updateSceneIn(time);\r\n\t}\r\n\r\n\t_updateSceneOut({ prevFrameDuration }) {\r\n\t\tif (!this._currentScene || this._transitionOverlayOffsetX === 0) {\r\n\t\t\tthis._currentScene = this._futureScene;\r\n\t\t\tthis._futureScene = null;\r\n\t\t} else  {\r\n\t\t\tthis._transitionOverlayOffsetX = Math.max(this._transitionOverlayOffsetX - prevFrameDuration / SceneManager.transitionDuration, 0);\r\n\t\t}\r\n\t}\r\n\r\n\t_updateSceneIn({ prevFrameDuration }) {\r\n\t\tthis._transitionOverlayOffsetX = Math.max(this._transitionOverlayOffsetX - prevFrameDuration / SceneManager.transitionDuration, -1);\r\n\r\n\t\tif (this._transitionOverlayOffsetX === -1) this._transitionOverlayOffsetX = 1;\r\n\t}\r\n\r\n\trender() {\r\n\t\tif (this._currentScene) this._currentScene.render();\r\n\t\tif (this._transitionOverlayOffsetX !== 1) this._renderTransitionOverlay();\r\n\t}\r\n\r\n\t_renderTransitionOverlay() {\r\n\t\tconst overlayPositionX = this._canvas.width * this._transitionOverlayOffsetX;\r\n\t\tDraw.rect(this._ctx, overlayPositionX, 0, this._canvas.width, this._canvas.height, Color.blueDeep.key)\r\n\t}\r\n\r\n\t_getScenesCommonProps() {\r\n\t\treturn {\r\n\t\t\tcanvas: this._canvas,\r\n\t\t\tctx: this._ctx,\r\n\t\t\tassets: this._assets,\r\n\t\t\tstate: this._state,\r\n\t\t\tlevels: this._levels,\r\n\t\t\tsceneManager: this,\r\n\t\t}\r\n\t}\r\n\r\n\t_isInTransition() {\r\n\t\treturn this._futureScene || this._transitionOverlayOffsetX !== 1;\r\n\t}\r\n\r\n\thandleClick(event) {\r\n\t\tif (this._isInTransition()) return;\r\n\r\n\t\tif (this._currentScene) this._currentScene.handleClick(event);\r\n\t}\r\n\r\n\thandleStartDragging(event) {\r\n\t\tif (this._isInTransition()) return;\r\n\r\n\t\tif (this._currentScene) this._currentScene.handleStartDragging(event);\r\n\t}\r\n\r\n\thandleDragging(event) {\r\n\t\tif (this._isInTransition()) return;\r\n\r\n\t\tif (this._currentScene) this._currentScene.handleDragging(event);\r\n\t}\r\n\r\n\thandleEndDragging(event) {\r\n\t\tif (this._isInTransition()) return;\r\n\r\n\t\tif (this._currentScene) this._currentScene.handleEndDragging(event);\r\n\t}\r\n\r\n\tshowOpenScene() {\r\n\t\tthis._futureScene = new OpenScene(this._getScenesCommonProps());\r\n\t}\r\n\r\n\tshowAboutScene() {\r\n\t\tthis._futureScene = new AboutScene(this._getScenesCommonProps());\r\n\t}\r\n\r\n\tshowLevelsScene(levelsKey) {\r\n\t\tthis._futureScene = new LevelsScene({ ...this._getScenesCommonProps(), levelsKey });\r\n\t}\r\n\r\n\tshowCoreScene(level) {\r\n\t\tthis._futureScene = new CoreScene({ ...this._getScenesCommonProps(), level });\r\n\t}\r\n\r\n\tshowResultScene(moves, score, level) {\r\n\t\tthis._futureScene = new ResultScene({ ...this._getScenesCommonProps(), moves, score, level });\r\n\t}\r\n\r\n\tstatic transitionDuration = 300;\r\n}","import Assets from './Assets';\r\nimport Levels from './Levels';\r\nimport State from './State';\r\nimport SceneManager from './SceneManager';\r\n\r\nimport levels from '../assets/json/levels.json';\r\n\r\nexport default class Game {\r\n\tconstructor(canvas) {\r\n\t\tthis._canvas = canvas;\r\n\t\tthis._ctx = canvas.getContext('2d');\r\n\t\tthis._setRenderSize();\r\n\r\n\t\tthis._assets = new Assets();\r\n\t\tthis._levels = new Levels({\r\n\t\t\tlevels,\r\n\t\t})\r\n\t\tthis._state = new State({\r\n\t\t\tlevels: this._levels,\r\n\t\t});\r\n\r\n\t\tthis._sceneManager = new SceneManager({\r\n\t\t\tcanvas: this._canvas,\r\n\t\t\tctx: this._ctx,\r\n\t\t\tassets: this._assets,\r\n\t\t\tlevels: this._levels,\r\n\t\t\tstate: this._state,\r\n\t\t});\r\n\r\n\t\tthis._prevTimestamp = null;\r\n\t\tthis._draggingStarted = false;\r\n\r\n\t\tthis._addEventHandlers();\r\n\t\tthis._startGame();\r\n\t}\r\n\r\n\tasync _startGame() {\r\n\t\tawait document.fonts.load('1px Nunito')\r\n\t\tawait this._assets.load();\r\n\t\t//await this._state.loadPlayerStats();\r\n\r\n\t\tthis._sceneManager.showOpenScene();\r\n\r\n\t\trequestAnimationFrame(timestamp => {\r\n\t\t\tthis._gameLoop(timestamp);\r\n\t\t});\r\n\t}\r\n\t\r\n\t_gameLoop(timestamp) {\r\n\t\trequestAnimationFrame(nextTimestamp => {\r\n\t\t\tthis._gameLoop(nextTimestamp);\r\n\t\t});\r\n\r\n\t\tconst prevTimestamp = this._prevTimestamp || timestamp;\r\n\t\tconst prevFrameDuration = timestamp - prevTimestamp;\r\n\t\tconst delta = prevFrameDuration / 1000;\r\n\t\tthis._sceneManager.update({ delta, prevFrameDuration, timestamp });\r\n\t\tthis._prevTimestamp = timestamp;\r\n\r\n\t\tthis._render();\r\n\t}\r\n\r\n\t_render() {\r\n\t\tthis._ctx.clearRect(0, 0, this._canvas.width, this._canvas.height);\r\n\t\tthis._sceneManager.render();\r\n\t}\r\n\r\n\t_addEventHandlers() {\r\n\t\tthis._canvas.addEventListener('click', event => this._handleClick(event))\r\n\t\tthis._canvas.addEventListener('mousedown', event => this._handleStartDragging(event))\r\n\t\twindow.addEventListener('mousemove', event => this._handleDragging(event))\r\n\t\twindow.addEventListener('mouseup', event => this._handleEndDragging(event))\r\n\t\tthis._canvas.addEventListener('touchstart', event => this._handleStartDragging(event));\r\n\t\twindow.addEventListener('touchmove', event => this._handleDragging(event));\r\n\t\twindow.addEventListener('touchend', event => this._handleEndDragging(event));\r\n\t\twindow.addEventListener('resize', () => this._setRenderSize());\r\n\t}\r\n\r\n\t_handleClick(event) {\r\n\t\tconst { clientX: x, clientY: y } = event;\r\n\t\tconst position = this._transformClickPosition({ x, y });\r\n\t\tthis._sceneManager.handleClick({ position });\r\n\t}\r\n\r\n\t_handleStartDragging(event) {\r\n\t\tthis._draggingStarted = true;\r\n\t\tconst { clientX: x, clientY: y } = event.touches?.[0] || event;\r\n\t\tconst position = this._transformClickPosition({ x, y });\r\n\t\tthis._sceneManager.handleStartDragging({ position });\r\n\t}\r\n\r\n\t_handleEndDragging(event) {\r\n\t\tthis._draggingStarted = false;\r\n\t\tconst { clientX: x, clientY: y } = event.touches?.[0] || event;\r\n\t\tconst position = this._transformClickPosition({ x, y });\r\n\t\tthis._sceneManager.handleEndDragging({ position });\r\n\t}\r\n\r\n\t_handleDragging(event) {\r\n\t\tif (!this._draggingStarted) return;\r\n\t\tconst { clientX: x, clientY: y } = event.touches?.[0] || event;\r\n\t\tconst position = this._transformClickPosition({ x, y });\r\n\t\tthis._sceneManager.handleDragging({ position });\r\n\t}\r\n\r\n\t_transformClickPosition({ x, y }) {\r\n\t\tx = x - this._canvas.getBoundingClientRect().left;\r\n\t\tx = x * (this._canvas.width / parseFloat(this._canvas.style.width));\r\n\t\ty = y - this._canvas.getBoundingClientRect().top;\r\n\t\ty = y * (this._canvas.height / parseFloat(this._canvas.style.height));\r\n\t\treturn { x, y };\r\n\t}\r\n\r\n\t_setRenderSize() {\r\n\t\tconst screenWidth = document.documentElement.clientWidth;\r\n\t\tconst screenHeight = document.documentElement.clientHeight;\r\n\t\t\r\n\t\tlet aspectRatio = this._canvas.width / this._canvas.height;\r\n\r\n\t\tlet renderHeight = screenHeight;\r\n\t\tlet renderWidth = renderHeight * aspectRatio;\r\n\r\n\t\tif (renderWidth > screenWidth) {\r\n\t\t\taspectRatio = this._canvas.height / this._canvas.width;\r\n\r\n\t\t\trenderWidth = screenWidth;\r\n\t\t\trenderHeight = renderWidth * aspectRatio;\r\n\t\t}\r\n\r\n\t\tthis._canvas.style.width = renderWidth + 'px';\r\n\t\tthis._canvas.style.height = renderHeight + 'px';\r\n\t}\r\n}\r\n","import styles from './assets/styles/index.styl';\r\n\r\nimport Game from './modules/Game';\r\nimport YSDK from './modules/YSDK';\r\n\r\naddEventListener('DOMContentLoaded', async () => {\r\n\t//await YSDK.initYSDK();\r\n\t//await YSDK.initPlayer();\r\n\r\n\tnew Game(document.getElementById('colored-tiles'));\r\n})"],"names":["___CSS_LOADER_URL_IMPORT_0___","URL","___CSS_LOADER_EXPORT___","___CSS_LOADER_URL_REPLACEMENT_0___","push","module","id","exports","cssWithMappingToString","list","toString","this","map","item","content","needLayer","concat","length","join","i","modules","media","dedupe","supports","layer","undefined","alreadyImportedModules","k","_k","url","options","String","__esModule","default","test","slice","hash","needQuotes","replace","cssMapping","btoa","base64","unescape","encodeURIComponent","JSON","stringify","data","sourceMapping","stylesInDOM","getIndexByIdentifier","identifier","result","modulesToDom","idCountMap","identifiers","base","count","indexByIdentifier","obj","css","sourceMap","references","updater","addElementStyle","byIndex","splice","api","domAPI","update","newObj","remove","lastIdentifiers","newList","index","newLastIdentifiers","_i","_index","memo","insert","style","target","styleTarget","document","querySelector","window","HTMLIFrameElement","contentDocument","head","e","getTarget","Error","appendChild","element","createElement","setAttributes","attributes","styleElement","nonce","setAttribute","textStore","replaceText","replacement","filter","Boolean","apply","styleSheet","cssText","cssNode","createTextNode","childNodes","removeChild","insertBefore","singletonData","singleton","singletonCounter","styleIndex","insertStyleElement","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","m","n","getter","d","a","definition","key","o","Object","defineProperty","enumerable","get","g","globalThis","Function","prop","prototype","hasOwnProperty","call","scriptUrl","importScripts","location","currentScript","src","scripts","getElementsByTagName","p","b","baseURI","self","href","nc","Assets","constructor","_assets","_loaded","load","Promise","resolve","forEach","source","type","fileName","split","pop","imagesTypes","includes","_loadImage","_increaseLoaded","image","Image","addEventListener","file","static","Levels","levels","_levels","getLevelsList","keys","reduce","total","getLevelById","level","find","getLevelByKeyAndIndex","getLevelsByKey","getLevelScore","moves","levelId","maxScore","minScore","YSDK","YaGames","init","then","ysdk","features","LoadingAPI","ready","console","log","catch","err","getPlayer","scopes","player","setStats","getStats","State","_levelsScores","_levelsMoves","async","levelsMoves","getPlayerStats","getRating","values","score","prevMoves","getLevelPrevScore","getLevelPrevMoves","levelsId","Draw","ctx","x","y","width","height","colorKey","opacity","globalAlpha","fillStyle","fillRect","radius","beginPath","moveTo","arcTo","fill","thickness","strokeStyle","lineWidth","stroke","text","size","font","fillText","dx","dy","dWidth","dHeight","drawImage","sx","sy","sWidth","sHeight","Color","Text","fontSize","actualBoundingBoxAscent","actualBoundingBoxDescent","measureText","textWidth","textHeight","lineHeight","paragraph","pIndex","prevParagraphs","paragraphPositionY","string","sIndex","calcTextMetrics","positionY","flat","Button","position","label","_ctx","_position","_size","_label","_labelPosition","_setLabelPosition","render","roundedRect","blueNight","white","isPressed","clickPosition","RatingPreview","state","assets","_state","_icon","_rating","_ratingPosition","_setRatingPosition","iconPositionX","iconPositionY","iconWidth","iconHeight","ratingFontSize","ratingMarginRight","ratingPositionY","LockedButton","unlockRating","_iconPosition","_setIconPosition","_unlockRatingLabel","_unlockRatingLabelPosition","_setUnlockRatingLabelPosition","paddingHorizontal","iconHorizontalMargin","OpenScene","canvas","sceneManager","_canvas","_sceneManager","_ratingPreview","_titleMarkup","_setTitleMarkup","_beginnerButton","_mediumButton","_hardButton","_aboutButton","_initButtons","time","rect","blueDeep","titleFontSize","handleClick","showLevelsScene","showAboutScene","handleStartDragging","handleDragging","handleEndDragging","title","titleMetrics","calcMultistringTextMetrics","titleLineHeight","titlePositionY","beginnerButtonPositionX","beginnerButtonPositionY","beginnerButtonWidth","beginnerButtonLabel","rating","mediumUnlocked","mediumUnlockRating","mediumButton","mediumButtonPositionX","mediumLockedButtonPositionX","mediumButtonPositionY","mediumButtonWidth","mediumLockedButtonWidth","mediumButtonLabel","hardUnlocked","hardUnlockRating","hardButton","hardButtonPositionX","hardLockedButtonPositionX","hardButtonPositionY","hardButtonWidth","hardLockedButtonWidth","hardButtonLabel","aboutButtonPositionX","aboutButtonPositionY","aboutButtonWidth","aboutButtonLabel","AboutScene","_backButton","_initButton","_titlePosition","_setTitlePosition","_descriptionMarkup","_setDescriptionMarkup","descriptionFontSize","description","descriptionMetrics","descriptionLineHeight","descriptionPositionY","showOpenScene","backButtonPositionX","backButtonPositionY","backButtonWidth","backButtonLabel","LevelButton","prevScore","_level","_levelLabel","getIndex","_levelLabelPosition","_setLevelLabelPosition","_prevMoves","_prevMovesPosition","_setPrevMovesPosition","_prevScore","_prevScoreMarkup","_setPrevScoreMarkup","_color","green","levelLabelFontSize","prevMovesFontSize","icon","prevScoreMarkup","padding","iconGap","prevMovesMarginBottom","prevMovesLineHeight","levelLabelLineHeight","getLevel","Tile","color","_opacity","_scaleFactor","positionX","getScaleFactor","setScaleFactor","scaleFactor","getPosition","setPosition","getColor","getOpacity","setOpacity","blue","sea","red","purple","orange","yellow","Level","targetMap","initialMap","_key","_id","_targetMap","_initialMap","_moves","match","currentFieldMap","every","row","cell","getTile","getKey","getId","getTargetMap","getMapLengths","getColors","colors","LevelsScene","levelsKey","_levelsKey","_levelsButtons","_setLevelsButtons","button","levelButton","showCoreScene","col","Math","floor","gridPositionX","gridGap","gridPositionY","LevelPreview","_map","_columnWidth","_rowHeight","_setMetrics","colorId","tilePositionX","gap","tilePositionY","tileColor","tileRadius","xLength","yLength","Cell","coords","_coords","_tile","_detachedTile","setTile","tile","detachedTile","detachTile","getCoords","TileScaleAnimation","delay","_delay","_startTime","_finished","timestamp","progressTime","duration","progressDelta","pow","path","isFinished","Field","_maxOutOfBoundsX","_maxOutOfBoundsY","_setMap","_setTiles","_animations","_startDraggingPosition","_startDraggingCoords","_prevDraggingPosition","_draggingAxis","_detachedTiles","_levelComplete","animation","_isFieldIncludesPosition","getCoordsByPosition","_setDraggingAxis","_detachTiles","_moveRow","_moveColumn","draggingPosition","xOffset","yOffset","abs","event","axis","sort","tilesWasUpdated","tileWasUpdated","_attachFirstDetachedTileToCell","_handleDraggingResult","shift","getPositionByCoords","_startLevelCompliteAnimation","setLevelResult","setTimeout","showResultScene","offset","currentPosition","newPosition","_getCellByCoords","_createTile","CoreScene","_levelPreview","_field","ResultScene","_score","_movesHintPosition","_setMovesHintPosition","_movesPosition","_setMovesPosition","_scoreMarkup","_setLevelScoreMarkup","_continueButton","_repeatButton","movesHintLabel","movesHintFontSize","movesFontSize","_showNextLevelOrLevelsMenu","nextLevel","movesHintPositionX","movesHintPositionY","movesPositionY","scoreMarkup","ratingPositionX","continueButtonPositionX","continueButtonPositionY","continueButtonWidth","buttonsHeight","continueButtonLabel","repeatButtonPositionX","repeatButtonPositionY","repeatButtonWidth","repeatButtonLabel","SceneManager","_currentScene","_futureScene","_transitionOverlayOffsetX","_updateSceneOut","_updateSceneIn","prevFrameDuration","max","transitionDuration","_renderTransitionOverlay","overlayPositionX","_getScenesCommonProps","_isInTransition","Game","getContext","_setRenderSize","_prevTimestamp","_draggingStarted","_addEventHandlers","_startGame","fonts","requestAnimationFrame","_gameLoop","nextTimestamp","delta","_render","clearRect","_handleClick","_handleStartDragging","_handleDragging","_handleEndDragging","clientX","clientY","_transformClickPosition","touches","getBoundingClientRect","left","parseFloat","top","screenWidth","documentElement","clientWidth","screenHeight","clientHeight","aspectRatio","renderHeight","renderWidth","getElementById"],"sourceRoot":""}